<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-learn/learn-parachains-protocol">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Parachains&#x27; Protocol Overview · Guide</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://guide.kusama.network/docs/learn-parachains-protocol"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Parachains&#x27; Protocol Overview · Guide"><meta data-rh="true" name="description" content="High level view of actors and protocols involved in running parachains on Polkadot."><meta data-rh="true" property="og:description" content="High level view of actors and protocols involved in running parachains on Polkadot."><meta data-rh="true" name="keywords" content="parachains,application-specific,sharding,protocol,validator,collator,nominator"><link data-rh="true" rel="icon" href="/img/Kusama_Canary_white.png"><link data-rh="true" rel="canonical" href="https://guide.kusama.network/docs/learn-parachains-protocol"><link data-rh="true" rel="alternate" href="https://guide.kusama.network/docs/learn-parachains-protocol" hreflang="en"><link data-rh="true" rel="alternate" href="https://guide.kusama.network/docs/learn-parachains-protocol" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://33KMAMG2DG-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Guide" href="/opensearch.xml">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Muli&display=swap">
<script src="https://buttons.github.io/buttons.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.js"></script>
<script src="https://unpkg.com/vanilla-back-to-top@7.2.1/dist/vanilla-back-to-top.min.js" onload="addBackToTop()" defer="defer"></script>
<script src="https://apisa.kusama.network/latest.js" async defer="defer"></script>
<script src="../js/custom.js"></script>
<script src="../js/clipboard.min.js"></script>
<script src="../js/copycode.js"></script><link rel="stylesheet" href="/assets/css/styles.4fd8784a.css">
<link rel="preload" href="/assets/js/runtime~main.d9b27359.js" as="script">
<link rel="preload" href="/assets/js/main.41177464.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/Kusama_logotype_white_large.png" alt="" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/Kusama_logotype_white_large.png" alt="" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Guide</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/kusama-getting-started">Docs</a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><a class="navbar__item navbar__link" href="/docs/contributing">Contribute</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/docs/learn-parachains-protocol" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="https://crowdin.com/project/polkadot-wiki" target="_blank" rel="noopener noreferrer" class="dropdown__link">Help us translate</a></li></ul></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><main class="docMainContainer_gTbr docMainContainerEnhanced_Uz_u"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Parachains&#x27; Protocol Overview</h1></header><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>This page is a summary of the
<a href="https://paritytech.github.io/polkadot/book/protocol-overview.html" target="_blank" rel="noopener noreferrer">Protocol Overview chapter in <strong>The Polkadot Parachain Host Implementer&#x27;s Guide</strong></a></p></div></div><p>The protocol aims to carry a parachain&#x27;s block from authoring to inclusion through a process that
can be carried out repeatedly and in parallel for each parachain connected to the Relay Chain.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="main-actors">Main Actors<a class="hash-link" href="#main-actors" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="validators">Validators<a class="hash-link" href="#validators" title="Direct link to heading">​</a></h3><p>They are responsible for validating the proposed parachain&#x27;s blocks by checking the
<strong>Proof-of-Validity</strong> (PoV) of the blocks and ensuring the PoV remains available for a designated
period. They have &quot;skin in the game&quot;, meaning they have funds bonded on-chain that can be partially
or fully confiscated by the network in case of misbehavior.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="collators">Collators<a class="hash-link" href="#collators" title="Direct link to heading">​</a></h3><p>They create the PoV that validators know how to check. Creating PoV requires familiarity with
transaction format and block authoring rules of a specific parachain, as well as having access to
its full state.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="parachains-protocol-summary">Parachains&#x27; Protocol Summary<a class="hash-link" href="#parachains-protocol-summary" title="Direct link to heading">​</a></h2><p>The parachains&#x27; protocol can be summarized into three main steps:</p><ol><li>Collators send the parachain block (parablock) with PoV to the set of Validators assigned to the
parachain (i.e. para-validators).</li><li>Validators verify if the parablock follows the state transition rules of the parachain and sign
statements that can have a positive or negative outcome.</li><li>With enough positive statements, the block is added to the Relay Chain.</li></ol><p>The figure below shows a representation of a parachain with collators and validators. The figure
also shows the journey of a block (white square) through the three main steps, as well as the
sections where the <a href="#inclusion-pipeline">Inclusion Pipeline</a> and the
<a href="#approval-process">Approval Process</a> take place (see following Sections).</p><p><img loading="lazy" alt="parachain-protocol-summary" src="/assets/images/parachain-protocol-summary-f35fa8aa8487c8ca5e1bd72b4d59d304.png" width="1920" height="800" class="img_ev3q"></p><p>Signed negative statements will lead to a dispute, and if there are false negatives, whoever will be
on the wrong side (once the dispute is resolved) will be slashed. False positives can also happen;
those actors responsible for it will also be slashed. To detect false positives, PoV information
must be available after the block has been added to the Relay Chain so that validators can check the
work. PoVs are typically between 1 MB and 10 MB in size and are not included in the Relay Chain
blocks. However, as a part of the data availability scheme, they are made available on the network
for a certain period so that the validators can perform the required checks.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="inclusion-pipeline">Inclusion Pipeline<a class="hash-link" href="#inclusion-pipeline" title="Direct link to heading">​</a></h2><p>The inclusion pipeline is the path of a parachain block (or parablock) from its creation to its
inclusion into the Relay Chain. The main checkpoints of that path are listed below.</p><ol><li>Validators are assigned to parachains by the <strong>Validator Assignment</strong> routine.</li><li>A collator produces the parachain block (known as parachain candidate or candidate) along with
PoV.</li><li>The collator forwards the candidate and PoV to validators assigned to the same parachain via the
<strong>Collator Distribution</strong> subsystem.</li><li>The validators assigned to the parachain participate in the <strong>Candidate Backing</strong> subsystem.
Candidates that gather enough signed validity statements are considered <strong>&quot;backable&quot;</strong> and their
backing is the set of signed statements.</li><li>A relay chain block author (selected by <a href="/docs/learn-consensus#block-production-babe">BABE</a>) can
note up to 1 backable candidate for each parachain to be included in the Relay Chain block
alongside its backing. Once included in the Relay Chain the candidate is considered backable in
that fork of the Relay Chain.</li><li>Once backable in the Relay Chain, the candidate is considered to be in &quot;pending availability&quot;
status. It can only be considered a part of the parachain once it is <strong>proven available</strong>.</li><li>In the following relay chain blocks, the validators will participate in the <strong>Availability
Distribution</strong> subsystem to ensure availability of the candidate. The subsequent relay chain
blocks will note information regarding the candidate&#x27;s availability.</li><li>Once the relay chain state machine has enough information to consider the candidate&#x27;s PoV as
being available, the candidate is considered part of the parachain and is graduated to being a
full parachain block.</li></ol><p><img loading="lazy" alt="parachain-inclusion-pipeline" src="/assets/images/parachain-inclusion-pipeline-1581c9648f229f4ad54257e0de65c332.png" width="1920" height="800" class="img_ev3q"></p><p>The figure above shows the path of a candidate block through the Inclusion pipeline. The block
changes its status through this path as follows:</p><ul><li>Candidate: A block is put forward by a collator to a para-validator (in this case V1). The
candidate block is shown as white square with one white tick mark at the side (PoV from the
collator). Note the candidate is not valid yet and can still fail to be included in the Relay
Chain.</li><li>Seconded: The block is put forward by the para-validator V1 to other para-validators (in this case
V2 and V3). The seconded block is shown as white square with a white tick mark and two yellow tick
marks on top of it. The yellow marks show the PoV from the para-validators.</li><li>Backable: The block validity is attested by a majority of the para-validators. The backable block
is shown as white square with a white tick mark and three yellow tick marks on top of it. The
yellow marks show the PoV from the para-validators.</li><li>Backed: The block is backed and noted in a fork on the Relay Chain by a relay chain block author
(in this case V4). The backed block is shown as square with white background and yellow border.
The backed block can still fail to be included in the Relay Chain. Note that for simplicity here
the backed parachain block is represented as a block of the Relay Chain, but in reality a relay
chain block contains many parachian blocks.</li><li>Pending availability: The block is backed but not considered available yet.</li><li>Included: The block is backed and considered available (we have a parablock). Parablocks are shown
as square with white background and yellow border enclosing a &quot;P&quot;.</li></ul><p>Once the parablock is considered available and part of the parachain, it is still &quot;pending
approval&quot;. The Inclusion Pipeline must conclude for a specific parachain before a new block can be
accepted on that parachain. After inclusion, the Approval Process starts, and it can run for many
parachain blocks at once.</p><p>The candidate can fail to be included in the parachain in any of the following ways:</p><ul><li>The collator is not able to propagate the block to any of the assigned validators.</li><li>The candidate is not backed by validators participating to the Candidate Backing subsystem.</li><li>The candidate is not selected by a relay chain block author.</li><li>The candidate&#x27;s PoV is not considered available within a timeout, and it is discarded from the
Relay Chain.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="approval-process">Approval Process<a class="hash-link" href="#approval-process" title="Direct link to heading">​</a></h2><p>Once the parablock is considered available and part of the parachain, is still &quot;pending approval&quot;.
At this stage the parablock is tentatively included in the parachain, although more confirmation is
necessary. In fact, the validators assigned to the parachain (i.e. the parachain validators) are
sampled from a validator set which is assumed to be 1/3 dishonest in the worst-case scenario. In
this case, it is likely that the majority of the random para-validators sampled for a specific
parachain are dishonest and can back a candidate wrongly. To address this, the <strong>Approval Process</strong>
allows detecting misbehavior after-the-fact without allocating more para-validators, which would
ultimately reduce the system&#x27;s throughput. As a parablock can accept children blocks after being
considered available, failure to pass the approval process will invalidate the parablock as well as
its descendants (children blocks). Only the validators who backed the block in question will be
slashed, not those who backed the descendants.</p><p>The approval pipeline can be divided into the following steps:</p><ol><li>Parablocks that have been included by the Inclusion Pipeline are pending approval for a time
window known as the <strong>secondary checking window</strong>.</li><li>During the secondary checking window, validators (secondary checkers) randomly self-select to
perform secondary checks on each of the parablock.</li><li>Secondary checkers acquire the parablock with PoV and re-run the validation function.</li><li>Secondary checkers gossip the results of their checks. Contradictory results lead to escalation
in which all validators are required to check the block. The validators on the losing side will
be slashed.</li><li>At the end of the process the parablock is either approved or rejected.</li></ol><p>The figure below shows the path of a parachain block when it exits the Inclusion Pipeline and it
enters the Approval Process. The parablock becomes accepted when it is backed, available and
<strong>undisputed</strong>. Thr parablock is checked a second time by a subset of validators (V5, V6 and V7),
and if there are no contradictory results the block is approved and gossiped to other relay chain
validators. Note the parablock after secondary checks is shown as a square with white background a
yellow border enclosing a &quot;P&quot;, and three white ticks (one for each secondary check). Approved
para-blocks are shown as yellow squares that become grey in color.</p><p><img loading="lazy" alt="parachain-approval-process" src="/assets/images/parachain-approval-process-c7325ce24e30aaf37145b0b5d5d00265.png" width="1920" height="800" class="img_ev3q"></p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>More information can be found in the dedicated sections about the
<a href="https://paritytech.github.io/polkadot/book/protocol-approval.html" target="_blank" rel="noopener noreferrer">approval process</a> and
<a href="https://paritytech.github.io/polkadot/book/protocol-disputes.html" target="_blank" rel="noopener noreferrer">disputes</a>.</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="network-asynchrony">Network Asynchrony<a class="hash-link" href="#network-asynchrony" title="Direct link to heading">​</a></h2><p>We have mentioned how a relay chain block author must select the candidate and note it on the Relay
Chain (we say the block is backed). The relay chain block author is selected by BABE, which is a
forkful algorithm. This means that different block authors are chosen at the same time and they may
not work on the same block parent (i.e. the representations in the previous figures are simplistic).
Also, the sets of validators and parachains are not fixed, and the validators&#x27; assignments to
parachains is also flexible.</p><p>We say that the network is <strong>asynchronous</strong> since there will be validators who have received a
block, and other validators who did not. Thus, the network is variable and it exists in multiple
states. In the figure below (<em>left</em>) the Group 1 received block C while Group 2 did not due to
network asynchrony. Validators in Group 2 can build another block on top of B, called C&#x27;. Assume
that afterwards, some validators become aware of both C and C&#x27; while others remain aware of one of
them (<em>right</em>). Validators in Group 3 must be aware of the network state in each head (C and C&#x27;) and
they may contribute to some or full extent on both. It is possible that due to network asynchrony
two forks may grow in parallel for some time, but eventually one fork will be chosen by the finality
gadget. In the absence of an adversarial network it is unlikely that two forks will coexist for some
time as there will be validators aware of both chain heads.</p><p><img loading="lazy" alt="parachain-forks" src="/assets/images/parachain-forks-b3d4a4e9161292fb63e1b86888a18579.png" width="1920" height="800" class="img_ev3q"></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-01-24T14:48:22.000Z">Jan 24, 2023</time></b> by <b>Filippo</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#main-actors" class="table-of-contents__link toc-highlight">Main Actors</a><ul><li><a href="#validators" class="table-of-contents__link toc-highlight">Validators</a></li><li><a href="#collators" class="table-of-contents__link toc-highlight">Collators</a></li></ul></li><li><a href="#parachains-protocol-summary" class="table-of-contents__link toc-highlight">Parachains&#39; Protocol Summary</a></li><li><a href="#inclusion-pipeline" class="table-of-contents__link toc-highlight">Inclusion Pipeline</a></li><li><a href="#approval-process" class="table-of-contents__link toc-highlight">Approval Process</a></li><li><a href="#network-asynchrony" class="table-of-contents__link toc-highlight">Network Asynchrony</a></li></ul></div></div></div></div></main></div></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/Kusama_Canary_white.png" alt="Guide" width="66" height="58"></a><div><a href="https://kusama.network/" target="_blank" class="homepage-font">Kusama Network</a><a href="https://polkadot.network/faq/" target="_blank" rel="noreferrer noopener" class="homepage-font">FAQ</a><a href="https://twitter.com/kusamanetwork" target="_blank" rel="noreferrer noopener" class="homepage-font">Twitter</a><a href="https://www.notion.so/web3foundation/Polkadot-Kusama-Community-Hub-ee1fd077ff6c42c381940404f6aa9f1c" target="_blank" rel="noreferrer noopener" class="homepage-font">Community Hub</a><a href="https://kusa.ma/discord" target="_blank" rel="noreferrer noopener" class="homepage-font">Kusama Discord</a><a href="https://matrix.to/#/!HfRYKXBoPmDBCAWUEJ:polkadot.builders" target="_blank" rel="noreferrer noopener" class="homepage-font">Kusama Watercooler</a><a href="https://web3.foundation/grants/" target="_blank" rel="noreferrer noopener" class="homepage-font">Grants and Bounties</a></div><div class="kusama-mainpage-cyber-row"><div class="kusama-mainpage-column"><h2 class="homepage-font-footer">Join a cyber secret society</h2><p class="homepage-font-footer">The Kappa Sigma Mu fraternity asks you to get a Kusama tattoo to join.</p><a href="/docs/maintain-guides-society-kusama"><button class="kusama-mainpage-build-footer">See Kappa Sigma Mu</button></a></div></div></section><section class="row"><div class="copyright homepage-font">© 2023 Web3 Foundation</div><a class="item homepage-font" href="https://polkadot.network/privacy/">Privacy Policy</a></section></footer></div>
<script src="/assets/js/runtime~main.d9b27359.js"></script>
<script src="/assets/js/main.41177464.js"></script>
</body>
</html>