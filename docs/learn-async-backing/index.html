<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-learn/learn-async-backing" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Asynchronous Backing Â· Guide</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://guide.kusama.network/docs/learn-async-backing"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Asynchronous Backing Â· Guide"><meta data-rh="true" name="description" content="A brief overview of asynchronous backing, and how it affects Polkadot&#x27;s scalability."><meta data-rh="true" property="og:description" content="A brief overview of asynchronous backing, and how it affects Polkadot&#x27;s scalability."><meta data-rh="true" name="keywords" content="parachains,backing,parablock,perspective parachains,unincluded segments"><link data-rh="true" rel="icon" href="/img/Kusama_Canary_white.png"><link data-rh="true" rel="canonical" href="https://guide.kusama.network/docs/learn-async-backing"><link data-rh="true" rel="alternate" href="https://guide.kusama.network/docs/learn-async-backing" hreflang="en"><link data-rh="true" rel="alternate" href="https://guide.kusama.network/docs/learn-async-backing" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://33KMAMG2DG-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Guide" href="/opensearch.xml">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Muli&display=swap">
<script src="https://buttons.github.io/buttons.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.js"></script>
<script src="https://unpkg.com/vanilla-back-to-top@7.2.1/dist/vanilla-back-to-top.min.js" onload="addBackToTop()" defer="defer"></script>
<script src="https://apisa.kusama.network/latest.js" async defer="defer"></script>
<script src="../js/custom.js"></script>
<script src="../js/clipboard.min.js"></script>
<script src="../js/copycode.js"></script><link rel="stylesheet" href="/assets/css/styles.dd7fb8ad.css">
<link rel="preload" href="/assets/js/runtime~main.161af186.js" as="script">
<link rel="preload" href="/assets/js/main.d3bff339.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#e6007a;color:white" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">The Polkadot Blockchain Academy is coming to Asia! <a href="https://www.polkadot.network/development/academy/?utm_source=guide.kusama.network&utm_medium=referral&utm_campaign=pba%204%205&utm_content=notification" target="_blank" rel="noopener noreferrer">Find out more ðŸ‘‰</a></div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/Kusama_logotype_white_large.png" alt="" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/Kusama_logotype_white_large.png" alt="" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Guide</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/kusama-getting-started">Docs</a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><a class="navbar__item navbar__link" href="/docs/contributing">Contribute</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/docs/learn-async-backing" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="https://crowdin.com/project/polkadot-wiki" target="_blank" rel="noopener noreferrer" class="dropdown__link">Help us translate</a></li></ul></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><main class="docMainContainer_gTbr docMainContainerEnhanced_Uz_u"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Asynchronous Backing</h1></header><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Learn about Parachain Consensus</div><div class="admonitionContent_S0QG"><p>To fully follow the material on this page, it is recommended to be familiar with the primary stages
of the <a href="/docs/learn-parachains-protocol">Parachain Protocol</a>.</p></div></div><p>In Polkadot, parablocks are generated by <a href="/docs/learn-collator">collators</a> on the parachain side and
sent to <a href="/docs/learn-validator">validators</a> on the relay chain side for backing.</p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>What is backing?</div><div class="admonitionContent_S0QG"><p><strong>Backing</strong> refers to the process in which parablocks are verified by a subset of validators or
backing groups. It is an important step in the validation process for parablocks, as it is the first
line of defense in ensuring censorship resistance. Parablocks only need to be backed by one
validator, and as a consequence, backing does not ensure parablock validity.</p></div></div><p>Backed parablocks are sent to other validators for inclusion into the relay chain. Parablocks are
included when validators have attested to having received
<a href="/docs/learn-parachains-protocol#erasure-codes">erasure coded chunks</a> of the parablock data. Note
<a href="#candidate-receipt">candidate receipts</a> and not the parablocks themselves are included in relay
blocks (but for simplicity, we refer to parablocks as being included). When generated, parablocks
must be anchored to a relay chain block called <strong>relay parent</strong>. The relay parent is an input to
parablock candidate generation. It provides the necessary context to build the next parablock. Note
that the relay parent of a parablock and the relay block including that parablock are always
different.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="synchronous-backing">Synchronous Backing<a href="#synchronous-backing" class="hash-link" aria-label="Direct link to Synchronous Backing" title="Direct link to Synchronous Backing">â€‹</a></h2><p>Before diving into asynchronous backing, it is important to understand what synchronous backing is
and its main limitations. In synchronous backing, parablock generation is tightly coupled to the
relay chain&#x27;s progression:</p><ol><li>A new parablock can be produced after including the previous one (i.e., every 12 seconds).</li><li>Context to build the next parablock is drawn from the latest included parablock ancestor</li><li>The relay parent must be the latest relay chain block.</li></ol><p>Because of (1) parablocks can be generated every other relay chain block (i.e., every 12 seconds).
Because of (2) generation of parablock <code>P</code> can only start when <code>P - 1</code> is included (there is no
<a href="#pipelining">pipelining</a>). Because of (3) execution time can take maximum 0.5 seconds as parablock
<code>P</code> is rushing to be backed in the next 5.5 seconds (2 seconds needed for backing and the rest for
gossiping). Every parablock is backed in 6 seconds (one relay chain block) and included in the next
6 seconds (next relay chain block). The time from generation to inclusion is 12 seconds. This limits
the amount of data a collator can add to each parablock.</p><p>Parablock generation will choose the most recently received relay block as a relay parent, although
with an imperfect network that may differ from the true most recent relay block. So, in general, if
relay block <code>R</code> is the relay parent of parablock <code>P</code>, then <code>P</code> could be backed in <code>R + 1</code> and
included in <code>R + 2</code>.</p><p><img loading="lazy" alt="sync-backing" src="/assets/images/sync-backing-e5c74751cd62df36651f23fab421f7cf.png" width="1920" height="800" class="img_ev3q"></p><p>From left to right, parablock P1 is anchored to the relay parent R0 (showed with an <code>x</code>), backed
into the relay chain block R1, and included in R2. After including P1, collators can start
generating P2 that must be anchored to the relay parent R2. Note that R2 will be the relay parent of
P2 if R2 is included on the relay chain and gossiped to the collator producing P2.</p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Every collator also runs an attached relay chain full node</div><div class="admonitionContent_S0QG"><p>The attached relay node receives relay blocks via gossip. Then, the relay node talks to the
parachain node through the <code>CollationGeneration</code> subsystem. R2 is gossiped to the relay full node
attached to the collator producing P2. Then, <code>CollationGeneration</code> passes information about R2 to
the collator node. Finally, relay parent information from R2 informs the generation of candidate P2.</p></div></div><p>Because P2 is rushing to be backed in 6 seconds into R3, collators have only 0.5 seconds to generate
it and present it to backing groups on the relay chain that will take approximately 2 seconds to
back it and some extra time for gossiping it (the whole process from collation to backing lasts 6
seconds). P2 is included in R4, which could be used as a relay parent for P3 (not shown). After 24
seconds P1 and P2 are included in the relay chain. Note how collators can start new parablocks every
12 seconds but only have 0.5 seconds to generate them.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="asynchronous-backing">Asynchronous Backing<a href="#asynchronous-backing" class="hash-link" aria-label="Direct link to Asynchronous Backing" title="Direct link to Asynchronous Backing">â€‹</a></h2><div class="theme-admonition theme-admonition-warning alert alert--danger admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>Disclaimer: Performance Measurements</div><div class="admonitionContent_S0QG"><p>Due to asynchronous backing not being fully implemented in a running production network, each
performance metric is not thoroughly tested nor guaranteed until proper benchmarking has occurred.</p></div></div><p><img loading="lazy" alt="sync-vs-async-backing" src="/assets/images/sync-vs-async-backing-3548388f98c44fc684a6176a6ccb8ed2.png" width="1920" height="800" class="img_ev3q"></p><p>In asynchronous backing, parablocks (P) are included every 6 seconds, and backing (B) and inclusion
(I) can happen within the same relay chain block (R).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="synchronous-vs-asynchronous-backing">Synchronous vs. Asynchronous Backing<a href="#synchronous-vs-asynchronous-backing" class="hash-link" aria-label="Direct link to Synchronous vs. Asynchronous Backing" title="Direct link to Synchronous vs. Asynchronous Backing">â€‹</a></h3><p>Below is a table showing the main differences between synchronous and asynchronous backing.</p><table><thead><tr><th align="left"></th><th align="center">Sync Backing</th><th align="center">Async Backing</th><th align="center">Async Backing Advantage</th></tr></thead><tbody><tr><td align="left"><strong>Parablocks included every</strong></td><td align="center">12 seconds</td><td align="center">6 seconds</td><td align="center">2x more throughput or 2x less latency</td></tr><tr><td align="left"><strong>Parablock&#x27;s maximum generation time</strong></td><td align="center">0.5 seconds</td><td align="center">2 seconds</td><td align="center">4x more data in a parablock</td></tr><tr><td align="left"><strong>Relay parent</strong></td><td align="center">Is the latest relay chain block</td><td align="center">Is not necessarily the latest relay chain block</td><td align="center">Collators can submit parablocks to backing groups in advance</td></tr><tr><td align="left"><strong>Collators can build on</strong></td><td align="center">The most recent ancestor included in the latest relay chain block</td><td align="center">An ancestor included in a relay chain block (not necessarily the latest), with augmented information from the latest ancestor in the <a href="#unincluded-segments">unincluded segment</a></td><td align="center">Collators can start building parablocks in advance</td></tr><tr><td align="left"><strong>Number of unincluded parablocks</strong></td><td align="center">Only one</td><td align="center">One, or more than one (depends on configuration parameters)</td><td align="center">More efficiency and scalability</td></tr><tr><td align="left"><strong>Unincluded parablocks</strong></td><td align="center">Cannot be re-proposed</td><td align="center">Can be re-proposed if not successfully included in the first attempt</td><td align="center">Decrease wastage of unused blockspace</td></tr><tr><td align="left"><strong>Parablock&#x27;s Backing-to-inclusion time</strong></td><td align="center">12 seconds</td><td align="center">12 seconds</td><td align="center">No change</td></tr><tr><td align="left"><strong>Parablock&#x27;s Inclusion-to-finality time</strong></td><td align="center">30 seconds</td><td align="center">30 seconds</td><td align="center">No change</td></tr></tbody></table><p>In synchronous backing, collators generate parablocks using context entirely pulled from the relay
chain. While in asynchronous backing, collators use additional context from the
<a href="#unincluded-segments">unincluded segment</a>. Parablocks are included every 6 seconds because backing
of parablock <code>N + 1</code> and inclusion of parablock <code>N</code> can happen on the same relay chain bock
(<a href="#pipelining">pipelining</a>). However, as for synchronous backing, a parablock takes 12 seconds to
get backed and included, and from inclusion to finality there is an additional 30-second time
window.</p><p>Because the throughput is increased by 2x and parachains have 4x more time to generate blocks,
asynchronous backing is expected to deliver 8x more blockspace to parachains.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sync-backing-as-a-special-case-of-async-backing">Sync Backing as a special case of Async Backing<a href="#sync-backing-as-a-special-case-of-async-backing" class="hash-link" aria-label="Direct link to Sync Backing as a special case of Async Backing" title="Direct link to Sync Backing as a special case of Async Backing">â€‹</a></h3><p>Two parameters of asynchronous backing can be controlled by
<a href="/docs/learn-polkadot-opengov">Governance</a>:</p><ul><li><p><a href="https://github.com/paritytech/polkadot-sdk/blob/f204e3264f945c33b4cea18a49f7232c180b07c5/polkadot/primitives/src/vstaging/mod.rs#L49" target="_blank" rel="noopener noreferrer"><code>max_candidate_depth</code></a>:
the number of parachain blocks a collator can produce that are not yet included in the relay
chain.</p></li><li><p><a href="https://github.com/paritytech/polkadot-sdk/blob/f204e3264f945c33b4cea18a49f7232c180b07c5/polkadot/primitives/src/vstaging/mod.rs#L54" target="_blank" rel="noopener noreferrer"><code>allowed_ancestry_len</code></a>:
the oldest relay chain parent a parachain block can be built on top of.</p></li></ul><p>Values of zero for both correspond to synchronous backing: <code>max_candidate_depth = 0</code> means there can
be only one unincluded parablock at all times, and <code>allowed_ancestry_len = 0</code> means a parablock can
be built only on the latest relay parent for that parachain. Initial values will be set to 3 (4
unincluded parablocks at all times) and 2 (relay parent can be the third last).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="async-backing-diagram">Async Backing Diagram<a href="#async-backing-diagram" class="hash-link" aria-label="Direct link to Async Backing Diagram" title="Direct link to Async Backing Diagram">â€‹</a></h3><p><img loading="lazy" alt="async-backing" src="/assets/images/async-backing-30d83e1ed114a3fb5e4ac44e58e2d6dc.png" width="1920" height="800" class="img_ev3q"></p><p>The diagram assumes:</p><ul><li><code>max_candidate_depth = 2</code>, meaning that there can be a maximum of three unincluded parablocks at
all times</li><li><code>allowed_ancestry_len = 1</code>, meaning parablocks can be anchored to the last or second-last relay
parent (i.e., collators can start preparing parablocks 6 seconds in advance)</li></ul><p>From left to right, parablock P1 is backed into the relay chain block R1 and included in R2. While
P1 undergoes backing, collators can already generate P2, which will have R0 as a relay parent
(showed with an <code>x</code>). Note how R0 can also be relay parent for P1 as long as in the unincluded
segment there is a maximum of three unincluded parablocks. Parablock P2 can be backed in R2 (the
same relay block where P1 is included) and included in R3. Collators can now use up to two seconds
to generate parablocks. And so on, P3 can be generated while backing groups check P2, and P4 can be
built while P3 undergoing backing. In 24 seconds, P1 to P3 are included in the relay chain.</p><p>Note how there are always three unincluded parablocks at all times, i.e. compared to synchronous
backing there can be multiple unincluded parablocks (i.e. <a href="#pipelining">pipelining</a>). For example,
when P1 is undergoing inclusion, P2 and P3 are undergoing backing. Collators were able to generate
multiple unincluded parablocks because on their end they have the
<a href="#unincluded-segments">unincluded segment</a>, a local storage of not-included parablock ancestors that
they can use to fetch information to build new parablocks. On the relay chain side,
<a href="#prospective-parachains">perspective parachains</a> repeats the work each unincluded segment does in
tracking candidates (as validators cannot trust the record kept on parachains).</p><p>The 6-second relay chain block delay includes a backing execution timeout (2 seconds) and some time
for network latency (the time it takes to gossip messages across the entire network). The limit
collators have to generate parablocks is how long it takes to back it (i.e., 2 seconds). Collation
generation conservatively always gives itself the same time limits. If there is extra time for
collation generation and backing (i.e., more than 2s + 6s), then all that extra time is allocated to
backing (see figure). This could result in backable blocks waiting their turn at the end of the
backing step for a few extra seconds until a core frees up to back that block as of the next relay
block or some later relay block. Note a core is occupied after backing and before inclusion.</p><p>The 2-second block generation time is thus a limiter, not a system limitation. If block generation
takes &gt;2 seconds, the unincluded segment will shrink (less unincluded parablocks), while if it takes
&lt;2 seconds, the segment will grow (more unincluded parablocks that will need to be backed and
included). Such flexibility from the parachain side will be possible when, on the relay chain side,
there will be elastic scaling (i.e.,
<a href="/docs/polkadot-direction#agile-core-usage">agile core usage</a> and
<a href="/docs/polkadot-direction#agile-coretime-allocation">coretime allocation</a>).</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="terminology">Terminology<a href="#terminology" class="hash-link" aria-label="Direct link to Terminology" title="Direct link to Terminology">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="candidate-receipt">Candidate Receipt<a href="#candidate-receipt" class="hash-link" aria-label="Direct link to Candidate Receipt" title="Direct link to Candidate Receipt">â€‹</a></h3><p>Saying that a parablock has been included in a relay chain parent does not mean the entire parablock
is in the relay chain block. Instead, <strong>candidate receipt</strong> consisting of the hash of the parablock,
state roots, and ID info is placed on the parent block on the relay chain. The relay chain does not
access the entire state of a parachain but only the values that changed during that block and the
merkelized hashes of the unchanged values.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="pipelining">Pipelining<a href="#pipelining" class="hash-link" aria-label="Direct link to Pipelining" title="Direct link to Pipelining">â€‹</a></h3><p>Asynchronous backing is a feature that introduces
<a href="https://www.techtarget.com/whatis/definition/pipelining" target="_blank" rel="noopener noreferrer">pipelining</a> to the parachain block
<a href="/docs/learn-parachains-protocol">generation, backing and inclusion</a>. It is analogous to the logical
pipelining of processor instruction in &quot;traditional&quot; architectures, where some instructions may be
executed before others are complete. Instructions may also be executed in parallel, enabling
multiple processor parts to work on potentially different instructions simultaneously.</p><p>Bundles of state transitions represented as blocks may be processed similarly. In the context of
Kusama, pipelining aims to increase the
throughput of the entire network by completing the backing and inclusion steps for different blocks
at the same time. Asynchronous backing does not just allow for pipelining within a single pipe (or
core). It lays the foundation for a large number of pipes (or cores) to run for the same parachain
at the same time. In that way, we have two distinct new forms of parallel computation.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="unincluded-segments">Unincluded Segments<a href="#unincluded-segments" class="hash-link" aria-label="Direct link to Unincluded Segments" title="Direct link to Unincluded Segments">â€‹</a></h3><p>Unincluded segments are chains of candidate parablocks that have yet to be included in the relay
chain, i.e. they can contain parablocks at any stage pre-inclusion. An unincluded segment may thus
include candidates that are seconded, backable, or backed. Every parablock candidate recorded in the
unincluded segment is immediately advertised to validators to begin the backing process.</p><p>The backing process occurs on the relay chain, whereas unincluded segments live in the runtimes of
parachain collators. The core functionality that asynchronous backing brings is the ability to build
on these unincluded segments of block ancestors rather than building only on ancestors included in
the relay chain state.</p><p>The purpose of each unincluded segment is twofold:</p><ul><li>Make each parachain aware of when and at what depth it can build blocks that won&#x27;t be rejected by
the relay chain</li><li>Provide critical context necessary to build parablocks with parent blocks that have yet to be
included. The unincluded segment is all about building parablocks.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="prospective-parachains">Prospective Parachains<a href="#prospective-parachains" class="hash-link" aria-label="Direct link to Prospective Parachains" title="Direct link to Prospective Parachains">â€‹</a></h3><p>The purpose of
<a href="https://paritytech.github.io/polkadot/book/node/backing/prospective-parachains.html" target="_blank" rel="noopener noreferrer">prospective parachains</a>
is twofold:</p><ul><li><p>Keep track of parablocks that have been submitted to backers but have yet to be included. This
includes tracking the full unincluded ancestry of each parablock, without which it wouldn&#x27;t be
possible to verify their legitimacy.</p></li><li><p>Look up and provide candidates which are children of the most recently included parablock for each
parachain. These are taken as inputs to the availability process. Prospective parachains is all
about tracking, storing, and providing candidates to the availability/inclusion step.</p></li></ul><p>Prospective parachains essentially repeats the work each <a href="#unincluded-segments">unincluded segment</a>
does in tracking candidates. Validators cannot simply trust the availability or validity of records
kept on parachains. Prospective parachains is the relay chain&#x27;s record of all parablock candidates
undergoing the backing and inclusion process. It is the authoritative gatekeeper for parablock
validity. Whereas the unincluded segment is a local record that allows parachains to produce blocks
that comply with the rules prospective parachains later enforces.</p><p>The unincluded segment lives in the parachain runtime, so it doesn&#x27;t know or care about forks/other
parachains. Prospective parachains lives in the relay chain client. So it has to simultaneously keep
track of candidates from all forks of all parachains. It is as if you folded the unincluded segments
from every fork of every parachain into one giant data structure. When you fold unincluded segments
representing different chain forks together, they create a tree structure. Hence the term
<a href="https://paritytech.github.io/polkadot/book/node/backing/prospective-parachains.html#fragment-trees" target="_blank" rel="noopener noreferrer"><strong>fragment tree</strong></a>.</p><p>A single unincluded segment tells a collator whether it can build on top of one fork of one
parachain. Prospective parachains tells a validator whether it should accept blocks built on top of
any fork from any parachain.</p><p>A parablock stops being a prospective parablock when it is included on chain. At that point
prospective parachains does not have to care about it anymore. Alternatively, a parablock&#x27;s relay
parent can get too old before that parablock is included, in which case prospective parachains can
throw away the candidate.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="learn-more">Learn More<a href="#learn-more" class="hash-link" aria-label="Direct link to Learn More" title="Direct link to Learn More">â€‹</a></h2><p>The information provided here is subject to change; keep up to date using the following resources:</p><ul><li><a href="https://polkadot.network/blog/polkadot-roadmap-roundup" target="_blank" rel="noopener noreferrer">Polkadot Roadmap Roundup</a> - Article by
Rob Habermeier, Polkadot founder, details the plans for Polkadot for 2023.</li><li><a href="https://github.com/paritytech/polkadot/issues/3779" target="_blank" rel="noopener noreferrer">Asynchronous Backing Spec &amp; Tracking Issue</a> -
The implementation tracking issue for asynchronous backing</li><li><a href="https://paritytech.github.io/polkadot/book/node/backing/prospective-parachains.html" target="_blank" rel="noopener noreferrer">Prospective Parachains Subsystem - The Polkadot Parachain Host Implementers&#x27; Guide</a></li><li>Chapter 6.11. from Polkadot Blockchain Academy (PBA) lecture material:
<a href="https://polkadot-blockchain-academy.github.io/pba-book/polkadot/async-backing-shallow/page.html" target="_blank" rel="noopener noreferrer">Asynchronous Backing (Shallow)</a></li><li>Chapter 6.15. from PBA lecture material:
<a href="https://polkadot-blockchain-academy.github.io/pba-book/polkadot/async-backing-deep/page.html" target="_blank" rel="noopener noreferrer">Asynchronous Backing (Deep)</a></li><li>Polkadot Blog Post -
<a href="https://www.polkadot.network/blog/elevating-polkadots-performance-and-scale-with-asynchronous-backing" target="_blank" rel="noopener noreferrer">Asynchronous Backing: Elevating Polkadot&#x27;s Performance and Scale</a></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-10-06T12:52:06.000Z">Oct 6, 2023</time></b> by <b>Filippo</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#synchronous-backing" class="table-of-contents__link toc-highlight">Synchronous Backing</a></li><li><a href="#asynchronous-backing" class="table-of-contents__link toc-highlight">Asynchronous Backing</a><ul><li><a href="#synchronous-vs-asynchronous-backing" class="table-of-contents__link toc-highlight">Synchronous vs. Asynchronous Backing</a></li><li><a href="#sync-backing-as-a-special-case-of-async-backing" class="table-of-contents__link toc-highlight">Sync Backing as a special case of Async Backing</a></li><li><a href="#async-backing-diagram" class="table-of-contents__link toc-highlight">Async Backing Diagram</a></li></ul></li><li><a href="#terminology" class="table-of-contents__link toc-highlight">Terminology</a><ul><li><a href="#candidate-receipt" class="table-of-contents__link toc-highlight">Candidate Receipt</a></li><li><a href="#pipelining" class="table-of-contents__link toc-highlight">Pipelining</a></li><li><a href="#unincluded-segments" class="table-of-contents__link toc-highlight">Unincluded Segments</a></li><li><a href="#prospective-parachains" class="table-of-contents__link toc-highlight">Prospective Parachains</a></li></ul></li><li><a href="#learn-more" class="table-of-contents__link toc-highlight">Learn More</a></li></ul></div></div></div></div></main></div></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/Kusama_Canary_white.png" alt="Guide" width="66" height="58"></a><div><a href="https://kusama.network/" target="_blank" class="homepage-font">Kusama Network</a><a href="https://polkadot.network/faq/" target="_blank" rel="noreferrer noopener" class="homepage-font">FAQ</a><a href="https://twitter.com/kusamanetwork" target="_blank" rel="noreferrer noopener" class="homepage-font">Twitter</a><a href="https://www.notion.so/web3foundation/Polkadot-Kusama-Community-Hub-ee1fd077ff6c42c381940404f6aa9f1c" target="_blank" rel="noreferrer noopener" class="homepage-font">Community Hub</a><a href="https://kusa.ma/discord" target="_blank" rel="noreferrer noopener" class="homepage-font">Kusama Discord</a><a href="https://matrix.to/#/!HfRYKXBoPmDBCAWUEJ:polkadot.builders" target="_blank" rel="noreferrer noopener" class="homepage-font">Kusama Watercooler</a><a href="https://web3.foundation/grants/" target="_blank" rel="noreferrer noopener" class="homepage-font">Grants and Bounties</a></div><div class="kusama-mainpage-cyber-row"><div class="kusama-mainpage-column"><h2 class="homepage-font-footer">Join a cyber secret society</h2><p class="homepage-font-footer">The Kappa Sigma Mu fraternity asks you to get a Kusama tattoo to join.</p><a href="/docs/maintain-guides-society-kusama"><button class="kusama-mainpage-build-footer">See Kappa Sigma Mu</button></a></div></div></section><section class="row"><div class="copyright homepage-font">Â© 2023 Web3 Foundation</div>Â·<a target="_blank" rel="noreferrer noopener" class="item homepage-font" href="https://polkadot.network/legal-disclosures/">Legal Disclosures</a>Â·<a target="_blank" rel="noreferrer noopener" class="item homepage-font" href="https://polkadot.network/privacy/">Privacy Policy</a></section></footer></div>
<script src="/assets/js/runtime~main.161af186.js"></script>
<script src="/assets/js/main.d3bff339.js"></script>
</body>
</html>