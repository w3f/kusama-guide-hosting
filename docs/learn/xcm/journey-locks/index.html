<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-learn/xcm/journey/locks/learn-xcm-docs-journey-locks" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Locks Â· Guide</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://guide.kusama.network/docs/learn/xcm/journey-locks"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Locks Â· Guide"><meta data-rh="true" name="description" content="Restrict Transfer or Withdrawal of Assets."><meta data-rh="true" property="og:description" content="Restrict Transfer or Withdrawal of Assets."><meta data-rh="true" name="keywords" content="xcm,cross-consensus messaging,locks"><link data-rh="true" rel="icon" href="/img/Kusama_Canary_white.png"><link data-rh="true" rel="canonical" href="https://guide.kusama.network/docs/learn/xcm/journey-locks"><link data-rh="true" rel="alternate" href="https://guide.kusama.network/docs/learn/xcm/journey-locks" hreflang="en"><link data-rh="true" rel="alternate" href="https://guide.kusama.network/docs/learn/xcm/journey-locks" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://33KMAMG2DG-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Guide" href="/opensearch.xml">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Muli&display=swap">
<script src="https://buttons.github.io/buttons.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.js"></script>
<script src="https://unpkg.com/vanilla-back-to-top@7.2.1/dist/vanilla-back-to-top.min.js" onload="addBackToTop()" defer="defer"></script>
<script src="https://apisa.kusama.network/latest.js" async defer="defer"></script>
<script src="../js/custom.js"></script>
<script src="../js/clipboard.min.js"></script>
<script src="../js/copycode.js"></script><link rel="stylesheet" href="/assets/css/styles.dd7fb8ad.css">
<link rel="preload" href="/assets/js/runtime~main.161af186.js" as="script">
<link rel="preload" href="/assets/js/main.d3bff339.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#e6007a;color:white" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">The Polkadot Blockchain Academy is coming to Asia! <a href="https://www.polkadot.network/development/academy/?utm_source=guide.kusama.network&utm_medium=referral&utm_campaign=pba%204%205&utm_content=notification" target="_blank" rel="noopener noreferrer">Find out more ðŸ‘‰</a></div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/Kusama_logotype_white_large.png" alt="" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/Kusama_logotype_white_large.png" alt="" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Guide</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/kusama-getting-started">Docs</a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><a class="navbar__item navbar__link" href="/docs/contributing">Contribute</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/docs/learn/xcm/journey-locks" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="https://crowdin.com/project/polkadot-wiki" target="_blank" rel="noopener noreferrer" class="dropdown__link">Help us translate</a></li></ul></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><main class="docMainContainer_gTbr docMainContainerEnhanced_Uz_u"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Locking</h1><p>Assets can be locked via XCM, meaning, the transfer or withdrawal of assets can be restricted via
messages. The XCM locking mechanism consists of four instructions: <code>LockAsset</code>, <code>UnlockAsset</code>,
<code>NoteUnlockable</code>, and <code>RequestUnlock</code>. Let&#x27;s explore each instruction in detail:</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="lockasset">LockAsset<a href="#lockasset" class="hash-link" aria-label="Direct link to LockAsset" title="Direct link to LockAsset">â€‹</a></h2><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">LockAsset { asset: MultiAsset, unlocker: MultiLocation }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The LockAsset instruction is used to lock locally held assets and prevent further transfers or
withdrawals. This instruction requires two parameters:</p><ul><li><code>asset</code>: The asset(s) to be locked.</li><li><code>unlocker</code>: The MultiLocation that can unlock the asset(s). This value must match the origin of a
corresponding <code>UnlockAsset</code> instruction to unlock the asset.</li></ul><p>When the locking operation succeeds, a <code>NoteUnlockable</code> instruction is sent to the unlocker. This
instruction serves as a notification that the asset is now unlockable.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="unlockasset">UnlockAsset<a href="#unlockasset" class="hash-link" aria-label="Direct link to UnlockAsset" title="Direct link to UnlockAsset">â€‹</a></h2><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">UnlockAsset { asset: MultiAsset, target: MultiLocation }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>UnlockAsset</code> instruction removes the lock on a specific asset on the local chain, allowing it
to be transferred if there are no other restrictions. The following parameters are required:</p><ul><li><code>asset</code>: The asset to be unlocked.</li><li><code>target</code>: The owner of the asset on the local chain.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="noteunlockable">NoteUnlockable<a href="#noteunlockable" class="hash-link" aria-label="Direct link to NoteUnlockable" title="Direct link to NoteUnlockable">â€‹</a></h2><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">NoteUnlockable { asset: MultiAsset, owner: MultiLocation }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>NoteUnlockable</code> instruction indicates that an asset has been locked on the system which the
message originated from.<br>
<!-- -->The locked assets can only be unlocked by receiving an <code>UnlockAsset</code> instruction from this chain.
This instruction requires the following parameters:</p><ul><li><code>asset</code>: The asset(s) which are now unlockable from this origin.</li><li><code>owner</code>: The owner of the asset on the chain in which it was locked. This may be a location
specific to the origin network. The owner can request this origin to unlock the assets using a
<code>RequestUnlock</code> instruction. However, the owner is not able to unlock the assets themselves.</li></ul><p>It is essential to trust the origin to have locked the corresponding asset before sending this
message.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="requestunlock">RequestUnlock<a href="#requestunlock" class="hash-link" aria-label="Direct link to RequestUnlock" title="Direct link to RequestUnlock">â€‹</a></h2><div class="language-rust, codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust, codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">RequestUnlock { asset: MultiAsset, locker: MultiLocation }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>RequestUnlock</code> instruction is used to send an <code>UnlockAsset</code> instruction to the <code>locker</code> for a
given asset. The following parameters are required:</p><ul><li><code>asset</code>: The asset(s) to be unlocked.</li><li><code>locker</code>: The location from which a previous <code>NoteUnlockable</code> was sent, and where the
<code>UnlockAsset</code> instruction should be sent.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="example">Example<a href="#example" class="hash-link" aria-label="Direct link to Example" title="Direct link to Example">â€‹</a></h2><p>To get a better grasp on how these instructions work together, we give two examples in this section.
The examples use the xcm-executor with the pallet-xcm as the implementation for the <code>AssetLocker</code>
config item. An important note of this implementation is that only one lock with ID <code>py/xcmlk</code> is
set per account. The pallet-xcm implementation keeps track of all the xcm-related locks that are
placed on an account and sets the most restricting one with the <code>py/xcmlk</code> lock ID. This principle
becomes more clear in the second example.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="example-1">Example 1<a href="#example-1" class="hash-link" aria-label="Direct link to Example 1" title="Direct link to Example 1">â€‹</a></h3><p>Check out the full <a href="https://github.com/paritytech/xcm-docs/tree/main/examples" target="_blank" rel="noopener noreferrer">example code</a>. The
scenario of this example is as follows:</p><p>Parachain A locks 5 Cents of relay chain native assets of its Sovereign account on the relay chain
and assigns Parachain B as unlocker. Parachain A then asks Parachain B to unlock the funds partly.
Parachain B responds by sending an UnlockAssets instruction to the relay chain.</p><p><img loading="lazy" alt="Example" src="/assets/images/Example1-61d1f7cdd7d0e964d4cde7e1b412b1b9.png" width="641" height="371" class="img_ev3q"></p><ol><li>send <code>LockAsset</code> instruction from ParaA to relay.</li></ol><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ParaA::execute_with(|| {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let message = Xcm(vec![LockAsset {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        asset: (Here, CENTS * 5).into(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        unlocker: (Parachain(2)).into(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }]);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert_ok!(ParachainPalletXcm::send_xcm(Here, Parent, message.clone()));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">});</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>Parachain B receives this <code>NoteUnlockable</code> instruction from the relay chain.</li></ol><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">NoteUnlockable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    owner: (Parent, Parachain(1)).into(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    asset: (Parent, CENTS * 5).into()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>Parachain A sends <code>RequestUnlock</code> instruction to Parachain B</li></ol><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ParaA::execute_with(|| {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let message = Xcm(vec![RequestUnlock {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        asset: (Parent, 3 * CENTS).into(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        locker: Parent.into(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }]);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert_ok!(ParachainPalletXcm::send_xcm(Here, (Parent, Parachain(2)), message.clone()));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">});</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="4"><li>Parachain B sends an <code>UnlockAsset</code> instruction to the relay chain. We check if the lock is
updated accordingly:</li></ol><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">assert_eq!(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    relay_chain::Balances::locks(&amp;parachain_sovereign_account_id(1)),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    vec![BalanceLock { id: *b&quot;py/xcmlk&quot;, amount: 2 * CENTS, reasons: Reasons::All }]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="example-2">Example 2<a href="#example-2" class="hash-link" aria-label="Direct link to Example 2" title="Direct link to Example 2">â€‹</a></h3><p>Check out the full <a href="https://github.com/paritytech/xcm-docs/tree/main/examples" target="_blank" rel="noopener noreferrer">example code</a>. The
scenario of this example is as follows:</p><p>Parachain A sets two locks on the relay chain with as unlockers Parachain B and Parachain C.
Parachain A then requests Parachain B to partly unlock.</p><p>Note: The locks overlap. When there are two or more locks, the total assets that are locked is equal
to the most restrictive lock (the lock that locks the most assets). When the most restrictive lock
is unlocked, the total locked assets is than equal to the next most restrictive lock.</p><p><img loading="lazy" alt="Example" src="/assets/images/Example2-6a5a1beb78bc98d9546a7f2771d6f091.png" width="821" height="371" class="img_ev3q"></p><ol><li>Set locks on the relay chain. Unlockers: B, C; Locks registered in pallet-xcm: 10, 5. Lock set in
pallet-balances: 10.</li></ol><div class="language-rust, codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust, codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ParaA::execute_with(|| {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let message = Xcm(vec![</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        LockAsset { asset: (Here, 10 * CENTS).into(), unlocker: (Parachain(2)).into() },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        LockAsset { asset: (Here, 5 * CENTS).into(), unlocker: (Parachain(3)).into() },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert_ok!(ParachainPalletXcm::send_xcm(Here, Parent, message.clone()));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">});</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Relay::execute_with(|| {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert_eq!(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        relay_chain::Balances::locks(&amp;parachain_sovereign_account_id(1)),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        vec![BalanceLock { id: *b&quot;py/xcmlk&quot;, amount: 10 * CENTS, reasons: Reasons::All }]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">});</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>Parachain B and C receive the <code>NoteUnlockable</code> instruction.</li></ol><div class="language-rust, codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust, codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ParaB::execute_with(|| {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert_eq!(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        parachain::MsgQueue::received_dmp(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        vec![Xcm(vec![NoteUnlockable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            owner: (Parent, Parachain(1)).into(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            asset: (Parent, 10 * CENTS).into()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }])]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">});</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ParaC::execute_with(|| {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert_eq!(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        parachain::MsgQueue::received_dmp(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        vec![Xcm(vec![NoteUnlockable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            owner: (Parent, Parachain(1)).into(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            asset: (Parent, 5 * CENTS).into()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }])]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">});</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>Parachain A sends a <code>RequestUnlock</code> instruction to Parachain B for 8 CENTS.</li></ol><div class="language-rust, codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust, codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ParaA::execute_with(|| {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let message = Xcm(vec![RequestUnlock {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        asset: (Parent, 8 * CENTS).into(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        locker: Parent.into(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }]);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert_ok!(ParachainPalletXcm::send_xcm(Here, (Parent, Parachain(2)), message.clone()));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">});</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="4"><li>Parachain B Unlocks a part of the funds by sending an <code>UnlockAsset</code> to the relay chain. we check
the lock in the balances-pallet. Unlockers: B, C; Funds registered in pallet-xcm: 2, 5. Lock set
in pallet-balances: 5.</li></ol><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Relay::execute_with(|| {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert_eq!(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        relay_chain::Balances::locks(&amp;parachain_sovereign_account_id(1)),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        vec![BalanceLock { id: *b&quot;py/xcmlk&quot;, amount: 5 * CENTS, reasons: Reasons::All }]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">});</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-09-07T15:13:13.000Z">Sep 7, 2023</time></b> by <b>bader y</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#lockasset" class="table-of-contents__link toc-highlight">LockAsset</a></li><li><a href="#unlockasset" class="table-of-contents__link toc-highlight">UnlockAsset</a></li><li><a href="#noteunlockable" class="table-of-contents__link toc-highlight">NoteUnlockable</a></li><li><a href="#requestunlock" class="table-of-contents__link toc-highlight">RequestUnlock</a></li><li><a href="#example" class="table-of-contents__link toc-highlight">Example</a><ul><li><a href="#example-1" class="table-of-contents__link toc-highlight">Example 1</a></li><li><a href="#example-2" class="table-of-contents__link toc-highlight">Example 2</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/Kusama_Canary_white.png" alt="Guide" width="66" height="58"></a><div><a href="https://kusama.network/" target="_blank" class="homepage-font">Kusama Network</a><a href="https://polkadot.network/faq/" target="_blank" rel="noreferrer noopener" class="homepage-font">FAQ</a><a href="https://twitter.com/kusamanetwork" target="_blank" rel="noreferrer noopener" class="homepage-font">Twitter</a><a href="https://www.notion.so/web3foundation/Polkadot-Kusama-Community-Hub-ee1fd077ff6c42c381940404f6aa9f1c" target="_blank" rel="noreferrer noopener" class="homepage-font">Community Hub</a><a href="https://kusa.ma/discord" target="_blank" rel="noreferrer noopener" class="homepage-font">Kusama Discord</a><a href="https://matrix.to/#/!HfRYKXBoPmDBCAWUEJ:polkadot.builders" target="_blank" rel="noreferrer noopener" class="homepage-font">Kusama Watercooler</a><a href="https://web3.foundation/grants/" target="_blank" rel="noreferrer noopener" class="homepage-font">Grants and Bounties</a></div><div class="kusama-mainpage-cyber-row"><div class="kusama-mainpage-column"><h2 class="homepage-font-footer">Join a cyber secret society</h2><p class="homepage-font-footer">The Kappa Sigma Mu fraternity asks you to get a Kusama tattoo to join.</p><a href="/docs/maintain-guides-society-kusama"><button class="kusama-mainpage-build-footer">See Kappa Sigma Mu</button></a></div></div></section><section class="row"><div class="copyright homepage-font">Â© 2023 Web3 Foundation</div>Â·<a target="_blank" rel="noreferrer noopener" class="item homepage-font" href="https://polkadot.network/legal-disclosures/">Legal Disclosures</a>Â·<a target="_blank" rel="noreferrer noopener" class="item homepage-font" href="https://polkadot.network/privacy/">Privacy Policy</a></section></footer></div>
<script src="/assets/js/runtime~main.161af186.js"></script>
<script src="/assets/js/main.d3bff339.js"></script>
</body>
</html>