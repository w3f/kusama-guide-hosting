<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-learn/xcm/executor_config/learn-xcm-docs-config-deep-dive" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Executor Configuration Â· Guide</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://guide.kusama.network/docs/learn/xcm/config-deep-dive"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Executor Configuration Â· Guide"><meta data-rh="true" name="description" content="Deep Dive into the Configuration of the XCM-Executor."><meta data-rh="true" property="og:description" content="Deep Dive into the Configuration of the XCM-Executor."><meta data-rh="true" name="keywords" content="xcm,cross-consensus messaging,config"><link data-rh="true" rel="icon" href="/img/Kusama_Canary_white.png"><link data-rh="true" rel="canonical" href="https://guide.kusama.network/docs/learn/xcm/config-deep-dive"><link data-rh="true" rel="alternate" href="https://guide.kusama.network/docs/learn/xcm/config-deep-dive" hreflang="en"><link data-rh="true" rel="alternate" href="https://guide.kusama.network/docs/learn/xcm/config-deep-dive" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://33KMAMG2DG-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Guide" href="/opensearch.xml">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Muli&display=swap">
<script src="https://buttons.github.io/buttons.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.js"></script>
<script src="https://unpkg.com/vanilla-back-to-top@7.2.1/dist/vanilla-back-to-top.min.js" onload="addBackToTop()" defer="defer"></script>
<script src="https://apisa.kusama.network/latest.js" async defer="defer"></script>
<script src="../js/custom.js"></script>
<script src="../js/clipboard.min.js"></script>
<script src="../js/copycode.js"></script><link rel="stylesheet" href="/assets/css/styles.dd7fb8ad.css">
<link rel="preload" href="/assets/js/runtime~main.161af186.js" as="script">
<link rel="preload" href="/assets/js/main.d3bff339.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#e6007a;color:white" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">The Polkadot Blockchain Academy is coming to Asia! <a href="https://www.polkadot.network/development/academy/?utm_source=guide.kusama.network&utm_medium=referral&utm_campaign=pba%204%205&utm_content=notification" target="_blank" rel="noopener noreferrer">Find out more ðŸ‘‰</a></div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/Kusama_logotype_white_large.png" alt="" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/Kusama_logotype_white_large.png" alt="" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Guide</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/kusama-getting-started">Docs</a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><a class="navbar__item navbar__link" href="/docs/contributing">Contribute</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/docs/learn/xcm/config-deep-dive" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="https://crowdin.com/project/polkadot-wiki" target="_blank" rel="noopener noreferrer" class="dropdown__link">Help us translate</a></li></ul></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><main class="docMainContainer_gTbr docMainContainerEnhanced_Uz_u"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Executor Config</h1><p>As previously mentioned, the xcm-executor is a Cross-Consensus Virtual Machine (XCVM)
implementation. It provides an opinionated interpretation and execution of XCMs. Each chain that
uses the xcm-executor, can configure it for their use case. In this chapter we will go over this
configuration, explain each config item and give some examples of the tools and types that can be
used to configure these items.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="xcm-executor-configuration">XCM Executor Configuration<a href="#xcm-executor-configuration" class="hash-link" aria-label="Direct link to XCM Executor Configuration" title="Direct link to XCM Executor Configuration">â€‹</a></h2><p>Below we list the <a href="https://paritytech.github.io/polkadot/doc/xcm_executor/trait.Config.html" target="_blank" rel="noopener noreferrer">Config</a>
trait of the xcm-executor. The Config trait expects multiple associated types. Each type has a trait
bound which the concrete type must implement. Some of these types will use a default implementation
in most situations (e.g. RuntimeCall). Other types have a default implementation specified by the
unit type <code>()</code>. Most types you&#x27;ll want to carefully choose which implementation they get. For most
of these types there are pre-defined solutions and building blocks you can use and adapt to your
scenario. These solutions are listed in the xcm-builder
<a href="https://github.com/paritytech/polkadot/tree/master/xcm/xcm-builder/src" target="_blank" rel="noopener noreferrer">folder</a>.</p><p>We will now explain each type and go over some of the implementations of the type:</p><div class="language-rust, codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust, codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/// The trait to parameterize the `XcmExecutor`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pub trait Config {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type RuntimeCall: Parameter + Dispatchable&lt;PostInfo = PostDispatchInfo&gt; + GetDispatchInfo;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type XcmSender: SendXcm;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type AssetTransactor: TransactAsset;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type OriginConverter: ConvertOrigin&lt;&lt;Self::RuntimeCall as Dispatchable&gt;::RuntimeOrigin&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type IsReserve: ContainsPair&lt;MultiAsset, MultiLocation&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type IsTeleporter: ContainsPair&lt;MultiAsset, MultiLocation&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type UniversalLocation: Get&lt;InteriorMultiLocation&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type Barrier: ShouldExecute;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type Weigher: WeightBounds&lt;Self::RuntimeCall&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type Trader: WeightTrader;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type ResponseHandler: OnResponse;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type AssetTrap: DropAssets;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type AssetClaims: ClaimAssets;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type AssetLocker: AssetLock;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type AssetExchanger: AssetExchange;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type SubscriptionService: VersionChangeNotifier;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type PalletInstancesInfo: PalletsInfoAccess;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type MaxAssetsIntoHolding: Get&lt;u32&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type FeeManager: FeeManager;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type MessageExporter: ExportXcm;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type UniversalAliases: Contains&lt;(MultiLocation, Junction)&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type CallDispatcher: CallDispatcher&lt;Self::RuntimeCall&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type SafeCallFilter: Contains&lt;Self::RuntimeCall&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-use-multiple-implementations">How to use multiple implementations.<a href="#how-to-use-multiple-implementations" class="hash-link" aria-label="Direct link to How to use multiple implementations." title="Direct link to How to use multiple implementations.">â€‹</a></h2><p>Some associated types in the Config trait are highly configurable and in certain cases will have
multiple implementations (e.g. Barrier). These implementations are then grouped using a tuple
<code>(impl_1, impl_2, ..., impl_n)</code>. The execution of the tuple type is sequential, meaning that each
item is executed one after another. Each item is checked to see whether it fails to pass, then the
next item is checked, and so on. The execution is halted when one of these items returns positive
(Ok or true, etc.). The next example of the Barrier type shows how the grouping works (understanding
each item in the tuple is not necessary).</p><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pub type Barrier = (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TakeWeightCredit,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    AllowTopLevelPaidExecutionFrom&lt;Everything&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    AllowKnownQueryResponses&lt;XcmPallet&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    AllowSubscriptionsFrom&lt;Everything&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pub struct XcmConfig;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">impl xcm_executor::Config for XcmConfig {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type Barrier = Barrier;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In the above example, when checking the barrier, we&#x27;ll first check the TakeWeightCredit type. If it
fails, we&#x27;ll go on to check the <code>AllowTopLevelPaidExecutionFrom&lt;Everything&gt;</code> and so on until one of
them gives a positive. If they all fail, a <code>Barrier</code> error is thrown.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="config-items">Config Items<a href="#config-items" class="hash-link" aria-label="Direct link to Config Items" title="Direct link to Config Items">â€‹</a></h2><p>We now go over each config item to explain what the associate type does and how it is used in the
xcm-executor. Many of these types have pre-defined solutions that can be found in the xcm-builder
and a good way to understand these configurations is to look at example configurations. On the
bottom of this page we listed some examples.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="runtimecall">RuntimeCall<a href="#runtimecall" class="hash-link" aria-label="Direct link to RuntimeCall" title="Direct link to RuntimeCall">â€‹</a></h3><p>The <code>RuntimeCall</code> type is equal to the RuntimeCall created in the <code>construct_runtime!</code> macro. It is
an enum of all the callable functions of each of the implemented pallets.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="xcmsender">XcmSender<a href="#xcmsender" class="hash-link" aria-label="Direct link to XcmSender" title="Direct link to XcmSender">â€‹</a></h3><p>The <code>XcmSender</code> type implements the <code>SendXcm</code> trait, and defines how the xcm_executor can send XCMs
(which transport layer it can use for the XCMs). This type normally implements a tuple for one or
more <a href="https://wiki.polkadot.network/docs/learn-xcm-transport" target="_blank" rel="noopener noreferrer">transport layer(s)</a>. For example a
parachain can implement the XcmSender as:</p><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Two routers - use UMP to communicate with the relay chain:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cumulus_primitives_utility::ParentAsUmp&lt;ParachainSystem, PolkadotXcm, ()&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ..and XCMP to communicate with the sibling chains.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    XcmpQueue,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If a runtime does not contain the XcmpQueue pallet as a config item for XcmSender, it will not be
able to send messages to other parachains. This can be useful for controlling the destinations that
an XCM can be sent to.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="assettransactor">AssetTransactor<a href="#assettransactor" class="hash-link" aria-label="Direct link to AssetTransactor" title="Direct link to AssetTransactor">â€‹</a></h3><p>The <code>AssetTransactor</code> type implements the <code>TransactAsset</code> trait and defines how the xcm-executor can
convert <code>MultiAsset</code>s from and to on chain assets and how to transfer these assets between accounts,
or from and to the holding register. As chains can support different types of currencies (native
tokens), fungibles and non-fungibles, we can configure the AssetTransactor in different ways,
depending on the chains implementation fo these types. Three default implementations are provided in
the xcm-builder, namely the <code>CurrencyAdapter</code>, <code>FungiblesAdapter</code> and <code>NonFungiblesAdapter</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="originconverter">OriginConverter<a href="#originconverter" class="hash-link" aria-label="Direct link to OriginConverter" title="Direct link to OriginConverter">â€‹</a></h3><p>The <code>OriginConverter</code> type implements the <code>ConvertOrigin</code> trait and defines how the xcm-executor can
convert a <code>MultiLocation</code> into a <code>RuntimeOrigin</code>. Most xcm-executors take multiple implementations
in a tuple for this configuration as there are many different MLs we would like to convert. When
multiple <code>OriginConverter</code>s conflict, the
<a href="https://paritytech.github.io/polkadot/doc/xcm/v2/enum.OriginKind.html" target="_blank" rel="noopener noreferrer">OriginKind</a> that is passed
to the <code>convert_origin</code> function is used to distingues which <code>OriginConverter</code> to use. There are
four different <code>OriginKind</code>s :</p><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pub enum OriginKind {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Native,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SovereignAccount,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Superuser,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Xcm,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>An example of the use of <code>OriginKind</code>s are the <code>SovereignSignedViaLocation</code> and
<code>SignedAccountId32AsNative</code> OriginConverters (defined in xcm-builder). The first converts an
sovereign account into a <code>Signed</code> RuntimeOrigin (uses <code>SovereignAccount</code> OriginKind) while the
second converts a local native account into a <code>Signed</code> RuntimeOrigin (uses <code>Native</code> OriginKind).</p><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pub type SovereignAccountOf = AccountId32Aliases&lt;ThisNetwork, AccountId&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // A `Signed` origin of the sovereign account that the original location controls.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SovereignSignedViaLocation&lt;SovereignAccountOf, RuntimeOrigin&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // The AccountId32 location type can be expressed natively as a `Signed` origin.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SignedAccountId32AsNative&lt;ThisNetwork, RuntimeOrigin&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="isreserve">IsReserve<a href="#isreserve" class="hash-link" aria-label="Direct link to IsReserve" title="Direct link to IsReserve">â€‹</a></h3><p>The <code>IsReserve</code> type must be set to specify which <code>&lt;MultiAsset, MultiLocation&gt;</code> pair we trust to
deposit reserve assets on our chain. We can also use the unit type <code>()</code> to block
<code>ReserveAssetDeposited</code> instructions. An example implementation is the <code>NativeAsset</code> struct, that
accepts an asset iff it is a native asset.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="isteleporter">IsTeleporter<a href="#isteleporter" class="hash-link" aria-label="Direct link to IsTeleporter" title="Direct link to IsTeleporter">â€‹</a></h3><p>The <code>IsTeleporter</code> type must be set to specify which <code>&lt;MultiAsset, MultiLocation&gt;</code> pair we trust to
teleport assets to our chain. We can also use the unit type <code>()</code> to block <code>ReceiveTeleportedAssets</code>
instruction. An example implementation is the <code>NativeAsset</code> struct, that accepts an asset iff it is
a native asset.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="universallocation">UniversalLocation<a href="#universallocation" class="hash-link" aria-label="Direct link to UniversalLocation" title="Direct link to UniversalLocation">â€‹</a></h3><p>The <code>UniversalLocation</code> type describes the location of the runtime implementing the xcm-executor in
the consensus universe. Below we give some examples of <code>UniversalLocation</code> implementations.</p><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//Polkadot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">X1(GlobalConsensus(NetworkId::Polkadot))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//Kusama</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">X1(GlobalConsensus(NetworkId::Kusama))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//Statemint</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">X2(GlobalConsensus(NetworkId::Polkadot), Parachain(1000))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="barrier">Barrier<a href="#barrier" class="hash-link" aria-label="Direct link to Barrier" title="Direct link to Barrier">â€‹</a></h3><p>Before any XCMs are executed in the XCM executor, they need to pass the <code>Barrier</code>. The <code>Barrier</code>
type implements the <code>ShouldExecute</code> trait and can be seen as the firewall of the xcm-executor. Each
time the xcm-executor receives an XCM, it check with the barrier if the XCM should be executed. We
can also define multiple barriers for our <code>Barrier</code> type by using a tuple. During execution, each
barrier is checks, and if one of them succeed, the XCM is executed. Example of a <code>Barrier</code>
implementations is <code>AllowTopLevelPaidExecutionFrom&lt;T&gt;</code> that accepts the XCM if the <code>T</code> contains the
origin of the XCM and the XCM contains the <code>BuyExecution</code> instruction. To accept all XCMs that pay
for execution we could set the barrier to <code>AllowTopLevelPaidExecutionFrom&lt;Everything&gt;</code>. There are
multiple pre-defined barrier implementations in the xcm-builder.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="weigher">Weigher<a href="#weigher" class="hash-link" aria-label="Direct link to Weigher" title="Direct link to Weigher">â€‹</a></h3><p>The <code>Weigher</code> is responsible for weighing full XCMs and individual instructions. This weight is
calculated before the XCM execution, and this calculated weight is checked against the weight_limit.
If the weight is more than weight_limit, the xcm will not be executed. The weight is also passed to
each <code>Barrier</code>, as certain barriers execute weight-based checks. After the execution of the XCM,
unused weight is refunded (if possible). There are pre-defined <code>Weigher</code> solutions in the
xcm-builder. The most used is the <code>FixedWeightBounds</code>:</p><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// BaseXcmWeight is a const weight.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FixedWeightBounds&lt;BaseXcmWeight, RuntimeCall, MaxInstructions&gt;;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Note: <a href="/docs/learn/xcm/fundamentals-fees">More information</a> about weight.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="trader">Trader<a href="#trader" class="hash-link" aria-label="Direct link to Trader" title="Direct link to Trader">â€‹</a></h3><p>The <code>Trader</code> type is responsible for buying weight in the <code>BuyExecution</code> instruction using assets in
the holding register and to refund unspend weight. One of the first implementations of the <code>Trader</code>
is defined in the xcm-builder, namely the <code>UsingComponents</code> trader.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="responsehandler">ResponseHandler<a href="#responsehandler" class="hash-link" aria-label="Direct link to ResponseHandler" title="Direct link to ResponseHandler">â€‹</a></h3><p>The <code>ResponseHandler</code> type is responsible for handling the <code>QueryResponse</code> instructions. A
<code>ResponseHandler</code> implementation has to implement the <code>OnResponse</code> trait. One of the implementations
of the <code>ResponseHandler</code> is the <code>pallet-xcm</code>. This will be the main implementation for most
FRAME-based systems that implement the XCM-executor. Another option is to use the unit type <code>()</code> if
you do not want to support <code>QueryResponse</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="assettrap">AssetTrap<a href="#assettrap" class="hash-link" aria-label="Direct link to AssetTrap" title="Direct link to AssetTrap">â€‹</a></h3><p>The <code>AssetTrap</code> type is responsible for handling the funds left over in holding after the execution
of the XCM. The assets are stored in the AssetTrap and can be claimed using the ClaimAsset
instruction. One of the implementations of the <code>AssetTrap</code> type is the <code>pallet-xcm</code>. Another option
is to use the unit type <code>()</code> if you do not want to support asset trapping. In this case, the assets
that are left in holding are burned.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="assetclaims">AssetClaims<a href="#assetclaims" class="hash-link" aria-label="Direct link to AssetClaims" title="Direct link to AssetClaims">â€‹</a></h3><p>The <code>AssetClaims</code> type is responsible for claiming trapped assets. It is during execution of the
<code>ClaimAsset</code> instruction. One of the implementations of the <code>AssetClaims</code> type is the <code>pallet-xcm</code>.
Another option is to use the unit type <code>()</code> if you do not want to support asset claiming.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="assetlocker">AssetLocker<a href="#assetlocker" class="hash-link" aria-label="Direct link to AssetLocker" title="Direct link to AssetLocker">â€‹</a></h3><p>The <code>AssetLocker</code> type is responsible with handling locking and unlocking assets. One of the
implementations of the <code>AssetLocker</code> type is the <code>pallet-xcm</code>. Another option is to use the unit
type <code>()</code> if you do not want to support asset locking.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="assetexchanger">AssetExchanger<a href="#assetexchanger" class="hash-link" aria-label="Direct link to AssetExchanger" title="Direct link to AssetExchanger">â€‹</a></h3><p>The <code>AssetExchanger</code> type implements the <code>AssetExchange</code> trait and handles the exchange of assets
for the ExchangeAsset instruction. An option is to use the unit type <code>()</code> if you do not want to
support asset exchanging.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="subscriptionservice">SubscriptionService<a href="#subscriptionservice" class="hash-link" aria-label="Direct link to SubscriptionService" title="Direct link to SubscriptionService">â€‹</a></h3><p>The <code>SubscriptionService</code> type implements the <code>VersionChangeNotifier</code> trait and is used for the
execution of the (Un)SubscribeVersion instructions. When a chain receives the <code>SubscribeVersion</code>
instruction, the <code>SubscriptionService</code> should send back a <code>QueryResponse</code> with the XCM version that
the chain uses. One of the implementations of the <code>SubscriptionService</code> is the <code>pallet-xcm</code>. This
will be the main implementation for most FRAME-based systems that implement the XCM-executor.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="palletinstancesinfo">PalletInstancesInfo<a href="#palletinstancesinfo" class="hash-link" aria-label="Direct link to PalletInstancesInfo" title="Direct link to PalletInstancesInfo">â€‹</a></h3><p>The <code>PalletInstancesInfo</code> type implements the <code>PalletsInfoAccess</code> trait and is used in the
<code>QueryPallet</code> and <code>ExpectPallet</code> instructions. It supplies the information of all the pallets in the
Runtime, and is therefore FRAME specific. The unit type <code>()</code> can be used if you do not want to
support pallet information.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="maxassetsintoholding">MaxAssetsIntoHolding<a href="#maxassetsintoholding" class="hash-link" aria-label="Direct link to MaxAssetsIntoHolding" title="Direct link to MaxAssetsIntoHolding">â€‹</a></h3><p>The <code>MaxAssetsIntoHolding</code> type is used to set a limit on the number of assets in the Holding
Register. In the worse case, the Holding Register may contain up to twice as many assets as this
limit.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="feemanager">FeeManager<a href="#feemanager" class="hash-link" aria-label="Direct link to FeeManager" title="Direct link to FeeManager">â€‹</a></h3><p>The <code>FeeManager</code> type is used to manage what happens with the fees that need to be paid for certain
XCM instructions. A <code>FeeManager</code> implementation implements the <code>FeeManager</code> trait. The FeeManager
determines if fees should be paid (or if they are waived) and what to do with the paid fees. The
unit type <code>()</code> can be used if you want to waive every fee.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="messageexporter">MessageExporter<a href="#messageexporter" class="hash-link" aria-label="Direct link to MessageExporter" title="Direct link to MessageExporter">â€‹</a></h3><p>The <code>MessageExporter</code> type implements the <code>ExportXcm</code> trait and is used to export a message to
another consensus system. The <code>MessageExporter</code> is different from the <code>XcmSender</code>. The
<code>MessageExporter</code> is able to spoof the origin of the message, meaning it can represent a different
origin then the local (i.e. the caller chain&#x27;s) location. The MessageExporter will mainly be used to
send XCMs over bridges. For a more in depth explanation, see the
<a href="https://paritytech.github.io/polkadot/doc/xcm_executor/traits/trait.ExportXcm.html" target="_blank" rel="noopener noreferrer">ExportXcm trait</a>.
The unit type <code>()</code> can be used if you do not want to support XCM exporting.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="universalaliases">UniversalAliases<a href="#universalaliases" class="hash-link" aria-label="Direct link to UniversalAliases" title="Direct link to UniversalAliases">â€‹</a></h3><p>The <code>UniversalAliases</code> type is used to list the origin locations and specific universal junctions to
which they are allowed to elevate themselves. <code>UniversalAliases</code> is used in the <code>UniversalOrigin</code>
instruction. To not allow any alliasing of origins, <code>Nothing</code> can be used.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="calldispatcher">CallDispatcher<a href="#calldispatcher" class="hash-link" aria-label="Direct link to CallDispatcher" title="Direct link to CallDispatcher">â€‹</a></h3><p>The <code>CallDispatcher</code> type is used by xcm-executor to dispatch calls that are passed in the
<code>Transact</code> instruction with the given origin. When no special call dispatcher is required, this can
be set to the same type as <code>RuntimeCall</code>. However, <code>CallDispatcher</code> can be used to customize call
dispatch, such as adapting the origin based on the call or modifying the call.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="safecallfilter">SafeCallFilter<a href="#safecallfilter" class="hash-link" aria-label="Direct link to SafeCallFilter" title="Direct link to SafeCallFilter">â€‹</a></h3><p>The <code>SafeCallFilter</code> type is used by the xcm-executor to whitelist calls that can be made in the
<code>Transact</code> instruction. This is a temporary measure until proof size weights for XCM instructions
are properly account for. If you want to allow all calls in <code>Tansact</code>, use <code>Everything</code>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-next">What Next<a href="#what-next" class="hash-link" aria-label="Direct link to What Next" title="Direct link to What Next">â€‹</a></h2><p>Check out the
<a href="https://github.com/paritytech/polkadot/blob/master/runtime/kusama/src/xcm_config.rs" target="_blank" rel="noopener noreferrer">Kusama</a>,
<a href="https://github.com/paritytech/cumulus/blob/master/parachains/runtimes/assets/statemine/src/xcm_config.rs" target="_blank" rel="noopener noreferrer">Statemine</a>,
or <a href="https://github.com/paritytech/trappist/blob/main/runtime/trappist/src/xcm_config.rs" target="_blank" rel="noopener noreferrer">Trappist</a>
for examples of how to implement the xcm-executor config.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-09-07T15:13:13.000Z">Sep 7, 2023</time></b> by <b>bader y</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#xcm-executor-configuration" class="table-of-contents__link toc-highlight">XCM Executor Configuration</a></li><li><a href="#how-to-use-multiple-implementations" class="table-of-contents__link toc-highlight">How to use multiple implementations.</a></li><li><a href="#config-items" class="table-of-contents__link toc-highlight">Config Items</a><ul><li><a href="#runtimecall" class="table-of-contents__link toc-highlight">RuntimeCall</a></li><li><a href="#xcmsender" class="table-of-contents__link toc-highlight">XcmSender</a></li><li><a href="#assettransactor" class="table-of-contents__link toc-highlight">AssetTransactor</a></li><li><a href="#originconverter" class="table-of-contents__link toc-highlight">OriginConverter</a></li><li><a href="#isreserve" class="table-of-contents__link toc-highlight">IsReserve</a></li><li><a href="#isteleporter" class="table-of-contents__link toc-highlight">IsTeleporter</a></li><li><a href="#universallocation" class="table-of-contents__link toc-highlight">UniversalLocation</a></li><li><a href="#barrier" class="table-of-contents__link toc-highlight">Barrier</a></li><li><a href="#weigher" class="table-of-contents__link toc-highlight">Weigher</a></li><li><a href="#trader" class="table-of-contents__link toc-highlight">Trader</a></li><li><a href="#responsehandler" class="table-of-contents__link toc-highlight">ResponseHandler</a></li><li><a href="#assettrap" class="table-of-contents__link toc-highlight">AssetTrap</a></li><li><a href="#assetclaims" class="table-of-contents__link toc-highlight">AssetClaims</a></li><li><a href="#assetlocker" class="table-of-contents__link toc-highlight">AssetLocker</a></li><li><a href="#assetexchanger" class="table-of-contents__link toc-highlight">AssetExchanger</a></li><li><a href="#subscriptionservice" class="table-of-contents__link toc-highlight">SubscriptionService</a></li><li><a href="#palletinstancesinfo" class="table-of-contents__link toc-highlight">PalletInstancesInfo</a></li><li><a href="#maxassetsintoholding" class="table-of-contents__link toc-highlight">MaxAssetsIntoHolding</a></li><li><a href="#feemanager" class="table-of-contents__link toc-highlight">FeeManager</a></li><li><a href="#messageexporter" class="table-of-contents__link toc-highlight">MessageExporter</a></li><li><a href="#universalaliases" class="table-of-contents__link toc-highlight">UniversalAliases</a></li><li><a href="#calldispatcher" class="table-of-contents__link toc-highlight">CallDispatcher</a></li><li><a href="#safecallfilter" class="table-of-contents__link toc-highlight">SafeCallFilter</a></li></ul></li><li><a href="#what-next" class="table-of-contents__link toc-highlight">What Next</a></li></ul></div></div></div></div></main></div></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/Kusama_Canary_white.png" alt="Guide" width="66" height="58"></a><div><a href="https://kusama.network/" target="_blank" class="homepage-font">Kusama Network</a><a href="https://polkadot.network/faq/" target="_blank" rel="noreferrer noopener" class="homepage-font">FAQ</a><a href="https://twitter.com/kusamanetwork" target="_blank" rel="noreferrer noopener" class="homepage-font">Twitter</a><a href="https://www.notion.so/web3foundation/Polkadot-Kusama-Community-Hub-ee1fd077ff6c42c381940404f6aa9f1c" target="_blank" rel="noreferrer noopener" class="homepage-font">Community Hub</a><a href="https://kusa.ma/discord" target="_blank" rel="noreferrer noopener" class="homepage-font">Kusama Discord</a><a href="https://matrix.to/#/!HfRYKXBoPmDBCAWUEJ:polkadot.builders" target="_blank" rel="noreferrer noopener" class="homepage-font">Kusama Watercooler</a><a href="https://web3.foundation/grants/" target="_blank" rel="noreferrer noopener" class="homepage-font">Grants and Bounties</a></div><div class="kusama-mainpage-cyber-row"><div class="kusama-mainpage-column"><h2 class="homepage-font-footer">Join a cyber secret society</h2><p class="homepage-font-footer">The Kappa Sigma Mu fraternity asks you to get a Kusama tattoo to join.</p><a href="/docs/maintain-guides-society-kusama"><button class="kusama-mainpage-build-footer">See Kappa Sigma Mu</button></a></div></div></section><section class="row"><div class="copyright homepage-font">Â© 2023 Web3 Foundation</div>Â·<a target="_blank" rel="noreferrer noopener" class="item homepage-font" href="https://polkadot.network/legal-disclosures/">Legal Disclosures</a>Â·<a target="_blank" rel="noreferrer noopener" class="item homepage-font" href="https://polkadot.network/privacy/">Privacy Policy</a></section></footer></div>
<script src="/assets/js/runtime~main.161af186.js"></script>
<script src="/assets/js/main.d3bff339.js"></script>
</body>
</html>