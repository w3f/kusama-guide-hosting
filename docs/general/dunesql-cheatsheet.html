<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-general/dune-analytics/dunesql-cheatsheet" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">DuneSQL Cheatsheet Â· Guide</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://guide.kusama.network/docs/general/dunesql-cheatsheet"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="DuneSQL Cheatsheet Â· Guide"><meta data-rh="true" name="description" content="A brief comparison of common features between DuneSQL and Common SQL."><meta data-rh="true" property="og:description" content="A brief comparison of common features between DuneSQL and Common SQL."><meta data-rh="true" name="keywords" content="polkadot,dashboard,dune,sql,dunesql"><link data-rh="true" rel="icon" href="/img/Kusama_Canary_white.png"><link data-rh="true" rel="canonical" href="https://guide.kusama.network/docs/general/dunesql-cheatsheet"><link data-rh="true" rel="alternate" href="https://guide.kusama.network/docs/general/dunesql-cheatsheet" hreflang="en"><link data-rh="true" rel="alternate" href="https://guide.kusama.network/docs/general/dunesql-cheatsheet" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://33KMAMG2DG-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Guide" href="/opensearch.xml">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Muli&display=swap">
<script src="https://buttons.github.io/buttons.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.js"></script>
<script src="https://unpkg.com/vanilla-back-to-top@7.2.1/dist/vanilla-back-to-top.min.js" onload="addBackToTop()" defer="defer"></script>
<script src="https://apisa.kusama.network/latest.js" async defer="defer"></script>
<script src="../js/custom.js"></script>
<script src="../js/clipboard.min.js"></script>
<script src="../js/copycode.js"></script><link rel="stylesheet" href="/assets/css/styles.81312b6c.css">
<link rel="preload" href="/assets/js/runtime~main.124e3667.js" as="script">
<link rel="preload" href="/assets/js/main.a7366485.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#e6007a;color:white" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">The Web3 Summit is coming to Berlin this August! <a href="https://ti.to/web3-summit/web3-summit-2024" target="_blank" rel="noopener noreferrer">Get your ticket ðŸ‘‰</a></div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/Kusama_logotype_white_large.png" alt="" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/Kusama_logotype_white_large.png" alt="" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Guide</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/kusama-getting-started">Docs</a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><a class="navbar__item navbar__link" href="/docs/contributing">Contribute</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/docs/general/dunesql-cheatsheet" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="https://crowdin.com/project/polkadot-wiki" target="_blank" rel="noopener noreferrer" class="dropdown__link">Help us translate</a></li></ul></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><main class="docMainContainer_gTbr docMainContainerEnhanced_Uz_u"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="theme-doc-markdown markdown"><h1>DuneSQL Cheatsheet</h1><p>It is important to note that when querying on Dune Analytics, DuneSQL is employed. Although most
functions and syntax are similar to standard SQL, there are still some differences compared to other
versions of SQL. Below is a comparison table of common features between DuneSQL and Google BigQuery
SQL.</p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>DuneSQL Reference</div><div class="admonitionContent_S0QG"><p>For more information on DuneSQL, please refer to the
<a href="https://docs.dune.com/query-engine/Functions-and-operators/index" target="_blank" rel="noopener noreferrer">DuneSQL documentation</a>.</p></div></div><table><thead><tr><th>Problem Type</th><th>BigQuery</th><th>DuneSQL(V2)</th><th>Description</th></tr></thead><tbody><tr><td>JSON Reading Method</td><td><code>JSON_EXTRACT_SCALAR(call_args, &quot;$.remark&quot;)</code></td><td><code>JSON_EXTRACT_SCALAR(JSON_PARSE(call_args), &#x27;$.remark&#x27;)</code></td><td>In DuneSQL, <code>JSON_PARSE</code> is needed to split the JSON if it is initially not in JSON format but is transformed into a JSON string.</td></tr><tr><td>JSON array to SQL array</td><td><code>JSON_EXTRACT_ARRAY(JSON_EXTRACT(pv, &#x27;$.others&#x27;))</code></td><td><code>cast(json_extract(pv, &#x27;$.others&#x27;) as array&lt;json&gt;)</code></td><td>BigQuery uses a function for this conversion, while DuneSQL utilizes casting and supports the JSON data type.</td></tr><tr><td>HEX to UTF8</td><td><code>SAFE_CONVERT_BYTES_TO_STRING(FROM_HEX(SUBSTR(hex_encode, 3)))</code></td><td><code>FROM_UTF8(from_hex(SUBSTR(hex_encode, 3)))</code></td><td>In DuneSQL, the <code>SAFE_CONVERT_BYTES_TO_STRING</code> is not required.</td></tr><tr><td>Time Series</td><td><code>TIMESTAMP_TRUNC(block_time, DAY) &gt;= TIMESTAMP(&quot;2023-12-01&quot;)</code></td><td><code>block_time &gt;= date(&#x27;2023-12-01&#x27;)</code></td><td>Time conversion in DuneSQL is simpler, involving direct usage of <code>variable operator date(value)</code>.</td></tr><tr><td>Data Type Conversion (FLOAT64 to DOUBLE)</td><td><code>CAST(JSON_EXTRACT_SCALAR(nominationpools_rewardpools, &#x27;$.lastRecordedRewardCounter&#x27;) AS FLOAT64)</code></td><td><code>CAST(JSON_EXTRACT_SCALAR(nominationpools_rewardpools, &#x27;$.lastRecordedRewardCounter&#x27;)</code></td><td>BigQuery refers to the data format as FLOAT64, while in DuneSQL, it is termed DOUBLE.</td></tr><tr><td>Handling Null Values</td><td><code>IFNULL(prev_member_bonded, 0)</code></td><td><code>COALESCE(prev_member_bonded, 0)</code></td><td>In DuneSQL, BigQuery&#x27;s <code>IFNULL</code> is equivalent to <code>COALESCE</code>.</td></tr><tr><td>Calculating Local Time and Subtracting Days</td><td><code>TIMESTAMP_TRUNC(ts, DAY) &gt;= TIMESTAMP(DATE_SUB(CURRENT_DATE(), INTERVAL 30 DAY))</code></td><td><code>ts &gt;= date(current_date - interval &#x27;30&#x27; day)</code></td><td>In BigQuery, operations on dates require functions, but DuneSQL allows direct use of <code>+</code> and <code>-</code>.</td></tr><tr><td>Using Hyperlinks in Tables</td><td><code>SELECT concat(concat(concat(&quot;&lt;a href=&#x27;https://analytics.polkaholic.io/superset/dashboard/77/?account=&quot;, address_ss58), &quot;&#x27;&gt;&quot;), if(address_name is null, concat(address_ss58, &#x27;&lt;/a&gt;&#x27;), concat(address_name, &#x27;&lt;/a&gt;&#x27;)))</code></td><td><code>CONCAT(&#x27;&lt;a target=&quot;_new&quot; href=&quot;https://analytics.polkaholic.io/superset/dashboard/77/?account=&#x27;, address_ss58, &#x27;&quot;&gt;&#x27;, address_ss58 ,&#x27;&lt;/a&gt;&#x27;) AS address_ss58</code></td><td>DuneSQL enables string concatenation using <code>CONCAT</code>, making it straightforward compared to the multiple <code>concat</code> functions required in BigQuery.</td></tr></tbody></table></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2024-06-24T07:55:16.000Z">Jun 24, 2024</time></b> by <b>MK</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"></nav></div></div></div></div></main></div></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/Kusama_Canary_white.png" alt="Guide" width="66" height="58"></a><div><a href="https://kusama.network/" target="_blank" class="homepage-font">Kusama Network</a><a href="https://polkadot.network/faq/" target="_blank" rel="noreferrer noopener" class="homepage-font">FAQ</a><a href="https://twitter.com/kusamanetwork" target="_blank" rel="noreferrer noopener" class="homepage-font">Twitter</a><a href="https://www.notion.so/web3foundation/Polkadot-Kusama-Community-Hub-ee1fd077ff6c42c381940404f6aa9f1c" target="_blank" rel="noreferrer noopener" class="homepage-font">Community Hub</a><a href="https://kusa.ma/discord" target="_blank" rel="noreferrer noopener" class="homepage-font">Kusama Discord</a><a href="https://matrix.to/#/!HfRYKXBoPmDBCAWUEJ:polkadot.builders" target="_blank" rel="noreferrer noopener" class="homepage-font">Kusama Watercooler</a><a href="https://web3.foundation/grants/" target="_blank" rel="noreferrer noopener" class="homepage-font">Grants and Bounties</a></div><div class="kusama-mainpage-cyber-row"><div class="kusama-mainpage-column"><h2 class="homepage-font-footer">Join a cyber secret society</h2><p class="homepage-font-footer">The Kappa Sigma Mu fraternity asks you to get a Kusama tattoo to join.</p><a href="/docs/maintain-guides-society-kusama"><button class="kusama-mainpage-build-footer">See Kappa Sigma Mu</button></a></div></div></section><section class="row"><div class="copyright homepage-font">Â© 2024 Web3 Foundation</div>Â·<a target="_blank" rel="noreferrer noopener" class="item homepage-font" href="https://polkadot.network/legal-disclosures/">Legal Disclosures</a>Â·<a target="_blank" rel="noreferrer noopener" class="item homepage-font" href="https://polkadot.network/privacy/">Privacy Policy</a></section></footer></div>
<script src="/assets/js/runtime~main.124e3667.js"></script>
<script src="/assets/js/main.a7366485.js"></script>
</body>
</html>