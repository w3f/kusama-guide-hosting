<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-learn/learn-xcm-instructions">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">XCM Instructions &amp; Register Specification Â· Guide</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://guide.kusama.network/docs/learn-xcm-instructions"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="XCM Instructions &amp; Register Specification Â· Guide"><meta data-rh="true" name="description" content="View the specification for instructions and registers for the XCM messaging format."><meta data-rh="true" property="og:description" content="View the specification for instructions and registers for the XCM messaging format."><meta data-rh="true" name="keywords" content="cross-consensus,XCM,XCMP,interoperability,communication"><link data-rh="true" rel="icon" href="/img/Kusama_Canary_white.png"><link data-rh="true" rel="canonical" href="https://guide.kusama.network/docs/learn-xcm-instructions"><link data-rh="true" rel="alternate" href="https://guide.kusama.network/docs/learn-xcm-instructions" hreflang="en"><link data-rh="true" rel="alternate" href="https://guide.kusama.network/docs/learn-xcm-instructions" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://33KMAMG2DG-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Guide" href="/opensearch.xml">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Muli&display=swap">
<script src="https://buttons.github.io/buttons.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.js"></script>
<script src="https://unpkg.com/vanilla-back-to-top@7.2.1/dist/vanilla-back-to-top.min.js" onload="addBackToTop()" defer="defer"></script>
<script src="https://apisa.kusama.network/latest.js" async defer="defer"></script>
<script src="../js/custom.js"></script>
<script src="../js/clipboard.min.js"></script>
<script src="../js/copycode.js"></script><link rel="stylesheet" href="/assets/css/styles.efe687f2.css">
<link rel="preload" href="/assets/js/runtime~main.cb5c00dc.js" as="script">
<link rel="preload" href="/assets/js/main.6070cef1.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#e6007a;color:white" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">Join Polkadot Decoded 2023 on June 28-29! <a href="https://polkadot.network/ecosystem/events/decoded-2023/?utm_source=guide.kusama.network&utm_medium=referral&utm_campaign=decoded23&utm_content=notification&utm_term=two" target="_blank" rel="noopener noreferrer">Register now ðŸ‘‰</a></div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/Kusama_logotype_white_large.png" alt="" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/Kusama_logotype_white_large.png" alt="" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Guide</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/kusama-getting-started">Docs</a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><a class="navbar__item navbar__link" href="/docs/contributing">Contribute</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/docs/learn-xcm-instructions" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="https://crowdin.com/project/polkadot-wiki" target="_blank" rel="noopener noreferrer" class="dropdown__link">Help us translate</a></li></ul></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><main class="docMainContainer_gTbr docMainContainerEnhanced_Uz_u"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>XCM Instructions &amp; Register Specification</h1></header><p>This page can also be viewed at the <a href="https://github.com/paritytech/xcm-format" target="_blank" rel="noopener noreferrer"><code>xcm-format</code></a>
repository, where each instruction and register is explained in-depth.</p><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_S0QG"><p>For a more practical approach to utilizing XCM registers and instructions, refer to the
<a href="https://paritytech.github.io/xcm-docs/" target="_blank" rel="noopener noreferrer">XCM Docs</a>. Please keep in mind that XCM is under active
development.</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="xcvm-registers">XCVM Registers<a href="#xcvm-registers" class="hash-link" aria-label="Direct link to XCVM Registers" title="Direct link to XCVM Registers">â€‹</a></h2><ul><li><em>Programme</em></li><li><em>Programme Counter</em></li><li><em>Error</em></li><li><em>Error Handler</em></li><li><em>Appendix</em></li><li><em>Origin</em></li><li><em>Holding</em></li><li><em>Surplus Weight</em></li><li><em>Refunded Weight</em></li><li><em>Transact Status</em></li><li><em>Topic</em></li><li><em>Transact Status Register</em></li><li><em>Topic Register</em></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="xcvm-instruction-set">XCVM Instruction Set<a href="#xcvm-instruction-set" class="hash-link" aria-label="Direct link to XCVM Instruction Set" title="Direct link to XCVM Instruction Set">â€‹</a></h2><ul><li><code>WithdrawAsset</code></li><li><code>ReserveAssetDeposited</code></li><li><code>ReceiveTeleportedAsset</code></li><li><code>QueryResponse</code></li><li><code>TransferAsset</code></li><li><code>TransferReserveAsset</code></li><li><code>Transact</code></li><li><code>HrmpNewChannelOpenRequest</code></li><li><code>HrmpChannelAccepted</code></li><li><code>HrmpChannelClosing</code></li><li><code>ClearOrigin</code></li><li><code>DescendOrigin</code></li><li><code>ReportError</code></li><li><code>DepositAsset</code></li><li><code>DepositReserveAsset</code></li><li><code>ExchangeAsset</code></li><li><code>InitiateReserveWithdraw</code></li><li><code>InitiateTeleport</code></li><li><code>QueryHolding</code></li><li><code>BuyExecution</code></li><li><code>RefundSurplus</code></li><li><code>SetErrorHandler</code></li><li><code>SetAppendix</code></li><li><code>ClearError</code></li><li><code>ClaimAsset</code></li><li><code>Trap</code></li><li><code>SubscribeVersion</code></li><li><code>UnsubscribeVersion</code></li><li><code>BurnAsset</code></li><li><code>ExpectAsset</code></li><li><code>ExpectError</code></li><li><code>ExpectOrigin</code></li><li><code>QueryPallet</code></li><li><code>ExpectPallet</code></li><li><code>ReportTransactStatus</code></li><li><code>ClearTransactStatus</code></li><li><code>LockAsset</code></li><li><code>UnlockAsset</code></li><li><code>NoteUnlockable</code></li><li><code>RequestUnlock</code></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="instructions-application-example">Instructions Application Example<a href="#instructions-application-example" class="hash-link" aria-label="Direct link to Instructions Application Example" title="Direct link to Instructions Application Example">â€‹</a></h2><p>The following presents the practical mapping of instructions to some
<a href="/docs/learn-xcm/#core-functionality-of-xcm">core functionality in XCM</a>.</p><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Programmability</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Functional Multichain Decomposition</li></ul><div class="margin-top--md"><div value="program"> These are the primary instructions that enable programmability and branching to be possible. Branching in this context is the ability for errors and logic to be handled as needed when dealing with a message.<ul><li><p><a href="https://github.com/paritytech/xcm-format/tree/master#expectassetmultiassets" target="_blank" rel="noopener noreferrer"><code>ExpectAsset(MultiAssets)</code></a> -
Checks if the Holding register has a specific amount of assets, throws an error if it doesn&#x27;t.</p></li><li><p><a href="https://github.com/paritytech/xcm-format/tree/master#expecterroroptionu32-error" target="_blank" rel="noopener noreferrer"><code>ExpectError(Option&lt;(u32, Error)&gt;)</code></a> -
Ensures the Error register contains the given error, and throws an error if it doesn&#x27;t.</p></li><li><p><a href="https://github.com/paritytech/xcm-format/tree/master#expectoriginmultilocation" target="_blank" rel="noopener noreferrer"><code>ExpectOrigin(MultiLocation)</code></a> -
Ensures the Origin register contains the expected origin, and throws an error if it doesn&#x27;t.</p></li><li><p><code>QueryPallet</code> - Queries the existence of a particular pallet type.</p></li><li><p><code>ExpectPallet</code> - Ensure that a particular pallet with a particular version exists.</p></li><li><p><code>ReportTransactStatus(QueryResponseInfo)</code> - Send a <code>QueryResponse</code> message containing the value of
the Transact Status Register to some destination.</p></li><li><p><code>ClearTransactStatus</code> - Set the Transact Status Register to its default, cleared, value.</p></li></ul></div><div value="fmd" hidden=""><p>These instructions highlight the key instructions focused on Functional Multichain Decomposition.</p><ul><li><p><code>LockAsset(MultiAsset, MultiLocation)</code> - Lock the locally held asset and prevent further transfer
or withdrawal.</p></li><li><p><code>UnlockAsset(MultiAsset, MultiLocation)</code> - Remove the lock over <code>asset</code> on this chain and (if
nothing else is preventing it) allow the asset to be transferred.</p></li><li><p><code>NoteUnlockable(MultiAsset, MultiLocation)</code> - Asset (<code>asset</code>) has been locked on the <code>origin</code>
system and may not be transferred. It may only be unlocked with the receipt of the <code>UnlockAsset</code>
instruction from this chain.</p></li><li><p><code>RequestUnlock(MultiAsset, MultiLocation)</code> - Send an <code>UnlockAsset</code> instruction to the <code>locker</code> for
the given <code>asset</code>.</p></li></ul></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-06-21T13:31:18.000Z">Jun 21, 2023</time></b> by <b>bader y</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#xcvm-registers" class="table-of-contents__link toc-highlight">XCVM Registers</a></li><li><a href="#xcvm-instruction-set" class="table-of-contents__link toc-highlight">XCVM Instruction Set</a></li><li><a href="#instructions-application-example" class="table-of-contents__link toc-highlight">Instructions Application Example</a></li></ul></div></div></div></div></main></div></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/Kusama_Canary_white.png" alt="Guide" width="66" height="58"></a><div><a href="https://kusama.network/" target="_blank" class="homepage-font">Kusama Network</a><a href="https://polkadot.network/faq/" target="_blank" rel="noreferrer noopener" class="homepage-font">FAQ</a><a href="https://twitter.com/kusamanetwork" target="_blank" rel="noreferrer noopener" class="homepage-font">Twitter</a><a href="https://www.notion.so/web3foundation/Polkadot-Kusama-Community-Hub-ee1fd077ff6c42c381940404f6aa9f1c" target="_blank" rel="noreferrer noopener" class="homepage-font">Community Hub</a><a href="https://kusa.ma/discord" target="_blank" rel="noreferrer noopener" class="homepage-font">Kusama Discord</a><a href="https://matrix.to/#/!HfRYKXBoPmDBCAWUEJ:polkadot.builders" target="_blank" rel="noreferrer noopener" class="homepage-font">Kusama Watercooler</a><a href="https://web3.foundation/grants/" target="_blank" rel="noreferrer noopener" class="homepage-font">Grants and Bounties</a></div><div class="kusama-mainpage-cyber-row"><div class="kusama-mainpage-column"><h2 class="homepage-font-footer">Join a cyber secret society</h2><p class="homepage-font-footer">The Kappa Sigma Mu fraternity asks you to get a Kusama tattoo to join.</p><a href="/docs/maintain-guides-society-kusama"><button class="kusama-mainpage-build-footer">See Kappa Sigma Mu</button></a></div></div></section><section class="row"><div class="copyright homepage-font">Â© 2023 Web3 Foundation</div><a target="_blank" rel="noreferrer noopener" class="item homepage-font" href="https://polkadot.network/legal-disclosures/">Â· Legal Disclosures Â·</a><a target="_blank" rel="noreferrer noopener" class="item homepage-font" href="https://polkadot.network/privacy/">Privacy Policy</a></section></footer></div>
<script src="/assets/js/runtime~main.cb5c00dc.js"></script>
<script src="/assets/js/main.6070cef1.js"></script>
</body>
</html>