<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-learn/learn-xcvm" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">XCM Virtual Machine (XCVM) &amp; XCM Executor ¬∑ Guide</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://guide.kusama.network/docs/learn-xcvm"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="XCM Virtual Machine (XCVM) &amp; XCM Executor ¬∑ Guide"><meta data-rh="true" name="description" content="Design of the XCM Executor and Mechanics of the XCM Virtual Machine."><meta data-rh="true" property="og:description" content="Design of the XCM Executor and Mechanics of the XCM Virtual Machine."><meta data-rh="true" name="keywords" content="cross-consensus,XCM,XCMP,interoperability,communication"><link data-rh="true" rel="icon" href="/img/Kusama_Canary_white.png"><link data-rh="true" rel="canonical" href="https://guide.kusama.network/docs/learn-xcvm"><link data-rh="true" rel="alternate" href="https://guide.kusama.network/docs/learn-xcvm" hreflang="en"><link data-rh="true" rel="alternate" href="https://guide.kusama.network/docs/learn-xcvm" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://33KMAMG2DG-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Guide" href="/opensearch.xml">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Muli&display=swap">
<script src="https://buttons.github.io/buttons.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.js"></script>
<script src="https://unpkg.com/vanilla-back-to-top@7.2.1/dist/vanilla-back-to-top.min.js" onload="addBackToTop()" defer="defer"></script>
<script src="https://apisa.kusama.network/latest.js" async defer="defer"></script>
<script src="../js/custom.js"></script>
<script src="../js/clipboard.min.js"></script>
<script src="../js/copycode.js"></script><link rel="stylesheet" href="/assets/css/styles.dd7fb8ad.css">
<link rel="preload" href="/assets/js/runtime~main.161af186.js" as="script">
<link rel="preload" href="/assets/js/main.d3bff339.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#e6007a;color:white" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">The Polkadot Blockchain Academy is coming to Asia! <a href="https://www.polkadot.network/development/academy/?utm_source=guide.kusama.network&utm_medium=referral&utm_campaign=pba%204%205&utm_content=notification" target="_blank" rel="noopener noreferrer">Find out more üëâ</a></div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/Kusama_logotype_white_large.png" alt="" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/Kusama_logotype_white_large.png" alt="" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Guide</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/kusama-getting-started">Docs</a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><a class="navbar__item navbar__link" href="/docs/contributing">Contribute</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/docs/learn-xcvm" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="https://crowdin.com/project/polkadot-wiki" target="_blank" rel="noopener noreferrer" class="dropdown__link">Help us translate</a></li></ul></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><main class="docMainContainer_gTbr docMainContainerEnhanced_Uz_u"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>XCM Virtual Machine (XCVM) &amp; XCM Executor</h1></header><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>XCM Documentation</div><div class="admonitionContent_S0QG"><p>For a more practical approach to utilizing XCM, refer to the <a href="/docs/learn/xcm">XCM Docs</a>. Please keep in
mind that XCM is under active development.</p></div></div><p>At the core of XCM lies the Cross-Consensus Virtual Machine (XCVM). A ‚Äúmessage‚Äù in XCM is an XCVM
program, referred to as an <strong>&quot;XCM&quot;</strong> or <strong>&quot;XCMs&quot;</strong> for multiple messages. The XCVM is a
register-based state machine. The state is tracked in domain-specific registers that hold
information that is used and mutated along the execution of a particular message. Most of the XCM
format comprises these registers and the instructions used to compose XCVM programs.</p><p>The XCVM is an ultra-high-level non-Turing-complete computer whose instructions are designed to be
roughly at the same level as transactions in terms of definition. Messages are one or more XCM
instructions executed in order by the XCVM. An XCM is executed until it either runs to the end or
hits an error, at which point it finishes up and halts.</p><p>The first implementation of the XCVM is the
<a href="https://github.com/paritytech/polkadot/tree/26b0c4f6273190f4538b24939a56b6a0b51a344c/xcm/xcm-executor" target="_blank" rel="noopener noreferrer"><code>xcm-executor</code></a>.
It follows the XCVM specification provided by Parity. It&#x27;s engineered to be extendable, providing
maximum customizability when configuring XCM. Because the <code>xcm-executor</code> is just an implementation
of XCVM, it&#x27;s entirely possible to create another implementation if desired.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="xcms-are-xcvm-programs">XCMs are XCVM Programs<a href="#xcms-are-xcvm-programs" class="hash-link" aria-label="Direct link to XCMs are XCVM Programs" title="Direct link to XCMs are XCVM Programs">‚Äã</a></h2><p>A cross consensus message (XCM) is just a program that runs on the <code>XCVM</code>: in other words, one or
more XCM instructions that are executed by an XCVM implementation, such as the <code>xcm-executor</code>. To
learn more about the XCVM and the XCM format, see the latest
<a href="https://medium.com/polkadot-network/xcm-part-iii-execution-and-error-management-ceb8155dd166" target="_blank" rel="noopener noreferrer">blog post on XCM</a>
by Dr. Gavin Wood.</p><p>XCM instructions might change a register, the state of the consensus system, or both. Depending on
the program&#x27;s goal, whether it is to teleport assets from one chain to another or call a smart
contract on another chain, XCMs usually require changes to the registers before any changes to the
consensus system can be made.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="xcm-executor--configuration">XCM Executor &amp; Configuration<a href="#xcm-executor--configuration" class="hash-link" aria-label="Direct link to XCM Executor &amp; Configuration" title="Direct link to XCM Executor &amp; Configuration">‚Äã</a></h2><p>The XCM Executor&#x27;s implementation centers around a core piece: the XCM configuration. Each instance
of the Executor must have a valid configuration, which specifies a multitude of options on how a
chain may treat incoming messages via
<a href="https://github.com/paritytech/polkadot/blob/26b0c4f6273190f4538b24939a56b6a0b51a344c/xcm/xcm-executor/src/config.rs#L52" target="_blank" rel="noopener noreferrer">Barriers</a>,
calculate weight for a message via the
<a href="https://github.com/paritytech/polkadot/blob/26b0c4f6273190f4538b24939a56b6a0b51a344c/xcm/xcm-executor/src/config.rs#L55" target="_blank" rel="noopener noreferrer">Weigher</a>,
how much weight to purchase via the
<a href="https://github.com/paritytech/polkadot/blob/26b0c4f6273190f4538b24939a56b6a0b51a344c/xcm/xcm-executor/src/config.rs#L58" target="_blank" rel="noopener noreferrer">Trader</a>,
<a href="https://github.com/paritytech/polkadot/blob/26b0c4f6273190f4538b24939a56b6a0b51a344c/xcm/xcm-executor/src/config.rs#L89" target="_blank" rel="noopener noreferrer">configure fees</a>,
how to
<a href="https://github.com/paritytech/polkadot/blob/26b0c4f6273190f4538b24939a56b6a0b51a344c/xcm/xcm-executor/src/config.rs#L40" target="_blank" rel="noopener noreferrer">convert origins</a>,
and more.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="cross-consensus-message-xcm-anatomy--flow">Cross Consensus Message (XCM) Anatomy &amp; Flow<a href="#cross-consensus-message-xcm-anatomy--flow" class="hash-link" aria-label="Direct link to Cross Consensus Message (XCM) Anatomy &amp; Flow" title="Direct link to Cross Consensus Message (XCM) Anatomy &amp; Flow">‚Äã</a></h2><p>An XCM is made up of a list of instructions that are executed in order. There are four different
kinds of XCM instructions:</p><ol><li><strong>Instruction</strong> - Results in a state change in the local consensus system or some state change.</li><li><strong>Trusted Indication</strong> - Tells the XCVM, or the Executor, that some action has been done before
already - meaning, this action is now trusted and can be acted on, i.e., in a teleport scenario.</li><li><strong>Information</strong> - Provides additional information about a particular origin, usually the result
of a query, i.e., a <code>QueryResponse</code> instruction.</li><li><strong>System Notification</strong> - Typically used in the context of when an HRMP channel is being opened,
closed, or accepted.</li></ol><p>Typically, an XCM takes the following path through the XCVM:</p><ol><li>Instructions within an XCM are read one-by-one by the XCVM. An XCM may contain one or more
instructions.</li><li>The instruction is executed. This means that the current values of the <em>XCVM registers</em>, the
<em>instruction type</em>, and the <em>instruction operands</em> are all used to execute some operation, which
might result in some registers changing their value, or in an error being thrown, which would
halt execution.</li><li>Each subsequent instruction within the XCM is read until the end of the message has been
reached.</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="example-register-the-holding-register">Example Register: The Holding Register<a href="#example-register-the-holding-register" class="hash-link" aria-label="Direct link to Example Register: The Holding Register" title="Direct link to Example Register: The Holding Register">‚Äã</a></h3><p>There are many instructions that depend on the <em>Holding register</em>. The <em>Holding register</em> is an XCVM
register that provides a place for any assets that are in an intermediary state to be held until
they are taken out of the Holding register. It requires an instruction to place assets within it and
another to withdraw them. The simplest example of this occurring is the <code>DepositAsset</code> instruction,
which in its Rust form looks like this:</p><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">enum Instruction {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    DepositAsset {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        assets: MultiAssetFilter,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        beneficiary: MultiLocation,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /* snip */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This instruction specifies which assets (asset type and amount), already present in the Holding
register, are going to be taken from it and deposited to the specified beneficiary (recipient). It
is very common for instructions to remove and place assets into the Holding register when
transacting between chains.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="example-transferasset">Example: TransferAsset<a href="#example-transferasset" class="hash-link" aria-label="Direct link to Example: TransferAsset" title="Direct link to Example: TransferAsset">‚Äã</a></h3><p>An example below illustrates how a chain may transfer assets locally, or locally on a remote chain
(as part of another instruction) using an XCM. In this message, the <code>TransferAsset</code> instruction is
defined with two parameters: <code>assets</code>, which are the assets to be transferred, and the
<code>beneficiary</code>, whoever will be the sole beneficiary of these assets. More complex instructions,
especially those which perform actions that target a location other than the interpreting consensus
system may make use of XCVM registers.</p><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">enum Instruction {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TransferAsset {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        assets: MultiAssets,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        beneficiary: MultiLocation,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /* snip */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><p>A <code>MultiAsset</code> is a general identifier for an asset. It may represent both fungible and
non-fungible assets, and in the case of a fungible asset, it represents some defined amount of the
asset.</p></li><li><p>A <code>MultiLocation</code> is a relative identifier, meaning that it can only be used to define the the
relative path between two locations, and cannot generally be used to refer to a location
universally.</p></li></ul><p><code>TransferAsset</code> is one of the many instructions that can be contained within an XCM. For more
information, please read <a href="/docs/learn-xcm-instructions">XCM Instructions in the wiki</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="locations-in-xcm">Locations in XCM<a href="#locations-in-xcm" class="hash-link" aria-label="Direct link to Locations in XCM" title="Direct link to Locations in XCM">‚Äã</a></h2><p>XCM&#x27;s generic nature involves specifying a wide array of &quot;locations&quot;, or any body that is governed
by consensus (parachains, solochains, smart contracts, accounts, etc). These are relatively abstract
notions that point to <em>where</em> but also <em>to who</em> a particular action may affect. The <code>MulitLocation</code>
type is what XCM uses to define these locations.</p><p>A <code>MultiLocation</code> is a relative identifier that defines a <strong>relative</strong> path into some state-bearing
consensus system.</p><p>It is used to define the relative path between two locations, and cannot generally be used to refer
to a location universally. It is very much akin to how a <strong>relative</strong> filesystem path works and is
dependent on the which consensus system the location expression is being evaluated.</p><p><img loading="lazy" alt="XCM MultiLocation" src="/assets/images/multilocation-faf4a11faddbbf2111e7fa25e08f7758.png" width="3612" height="772" class="img_ev3q"></p><p><code>MultiLocation</code> has two primary fields:</p><ul><li>A series of paths, called <code>Junctions</code>, which define an interior portion of state to descend into
it (sometimes called a &quot;sub-consensus&quot; system, such as a smart contract or pallet). An interior
location may also be used to refer to a Junction, used in the context of &quot;a parachain is an
<strong>interior location</strong> of the relay chain&quot;, or how a UTXO is interior to Bitcoin&#x27;s consensus.</li><li>The number of parent junctions at the beginning of a <code>MultiLocation</code>&#x27;s formation - in other words,
the number of parent consensus systems above it.</li></ul><p>There are a number of various <code>Junction</code> variants that may be used to describe a particular
location - whether it&#x27;s a 32 byte account, a Substrate pallet, or a pluralistic body.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="multilocation-scenario-example">MultiLocation Scenario Example<a href="#multilocation-scenario-example" class="hash-link" aria-label="Direct link to MultiLocation Scenario Example" title="Direct link to MultiLocation Scenario Example">‚Äã</a></h3><p>In this scenario, assume an XCM is to be sent from our parachain to the Asset Hub
(<code>Parachain 1000</code>). This XCM references an account on the Asset Hub. As a general path, the
<code>MultiLocation</code> would look like this:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">../Parachain(1000)/AccountId32(&lt;some_account_id&gt;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Or, as a Rust enum:</p><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">MultiLocation {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  parents: 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  interior: X2(Parachain(1000), &lt;some_account_id&gt;.into())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><p>In the first field, <code>parents</code>, there is a parent of <code>1</code>. This is because our parachain has the
relay chain as a parent - in other words, it will go <strong>up</strong> by one consensus system to the relay
chain. This is also illustrated by the <code>../</code> of the &quot;file path&quot; representation.</p></li><li><p>The second field, <code>interior</code>, defines where to go after the relay chain. In this case, from the
relay chain this message will go to the Asset Hub (<code>Parachain 1000</code>), then reference the account
(<code>some_account_id</code>) located within.</p></li></ul><p>Keep in mind that this location is specific to this interaction. The identities may need to change
if this location was defined on another consensus system, such as Kusama. On other consensus
systems, such as Ethereum, it won&#x27;t be able to interpret it.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="universallocation-in-xcm">UniversalLocation in XCM<a href="#universallocation-in-xcm" class="hash-link" aria-label="Direct link to UniversalLocation in XCM" title="Direct link to UniversalLocation in XCM">‚Äã</a></h3><p>A <code>UniversalLocation</code> refers to any global consensus system. A global consensus system is an entity
that provides its top-level consensus through some non-derivative consensus algorithm that can exist
without reference to any other singleton data system. Such global consensus systems include Polkadot
(or other relay chains), Bitcoin, or Ethereum. It provides a point of reference for overarching
consensus systems.</p><p>The <code>GlobalConsensus</code> junction refers to a global consensus system and takes a <code>NetworkId</code> that
specifies a particular remote network. A <code>UniversalLocation</code> allows overarching consensus systems to
communicate using this junction. Sub-consensus systems (i.e., a parachain on Polkadot) may refer to
other <em>remote</em> sub-consensus systems (i.e., a parachain on Kusama) using a relative path defined via
a <code>MultiLocation</code>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="simulating-xcvm-using-the-xcm-simulator">Simulating XCVM using the xcm-simulator<a href="#simulating-xcvm-using-the-xcm-simulator" class="hash-link" aria-label="Direct link to Simulating XCVM using the xcm-simulator" title="Direct link to Simulating XCVM using the xcm-simulator">‚Äã</a></h2><p>Within the Polkadot repository exists the
<a href="https://github.com/paritytech/polkadot/tree/master/xcm/xcm-simulator" target="_blank" rel="noopener noreferrer"><code>xcm-simulator</code></a>, which
allows developers to experiment with building, executing, and simulating various XCM use scenarios.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-09-11T11:49:48.000Z">Sep 11, 2023</time></b> by <b>Filippo</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#xcms-are-xcvm-programs" class="table-of-contents__link toc-highlight">XCMs are XCVM Programs</a></li><li><a href="#xcm-executor--configuration" class="table-of-contents__link toc-highlight">XCM Executor &amp; Configuration</a></li><li><a href="#cross-consensus-message-xcm-anatomy--flow" class="table-of-contents__link toc-highlight">Cross Consensus Message (XCM) Anatomy &amp; Flow</a><ul><li><a href="#example-register-the-holding-register" class="table-of-contents__link toc-highlight">Example Register: The Holding Register</a></li><li><a href="#example-transferasset" class="table-of-contents__link toc-highlight">Example: TransferAsset</a></li></ul></li><li><a href="#locations-in-xcm" class="table-of-contents__link toc-highlight">Locations in XCM</a><ul><li><a href="#multilocation-scenario-example" class="table-of-contents__link toc-highlight">MultiLocation Scenario Example</a></li><li><a href="#universallocation-in-xcm" class="table-of-contents__link toc-highlight">UniversalLocation in XCM</a></li></ul></li><li><a href="#simulating-xcvm-using-the-xcm-simulator" class="table-of-contents__link toc-highlight">Simulating XCVM using the xcm-simulator</a></li></ul></div></div></div></div></main></div></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/Kusama_Canary_white.png" alt="Guide" width="66" height="58"></a><div><a href="https://kusama.network/" target="_blank" class="homepage-font">Kusama Network</a><a href="https://polkadot.network/faq/" target="_blank" rel="noreferrer noopener" class="homepage-font">FAQ</a><a href="https://twitter.com/kusamanetwork" target="_blank" rel="noreferrer noopener" class="homepage-font">Twitter</a><a href="https://www.notion.so/web3foundation/Polkadot-Kusama-Community-Hub-ee1fd077ff6c42c381940404f6aa9f1c" target="_blank" rel="noreferrer noopener" class="homepage-font">Community Hub</a><a href="https://kusa.ma/discord" target="_blank" rel="noreferrer noopener" class="homepage-font">Kusama Discord</a><a href="https://matrix.to/#/!HfRYKXBoPmDBCAWUEJ:polkadot.builders" target="_blank" rel="noreferrer noopener" class="homepage-font">Kusama Watercooler</a><a href="https://web3.foundation/grants/" target="_blank" rel="noreferrer noopener" class="homepage-font">Grants and Bounties</a></div><div class="kusama-mainpage-cyber-row"><div class="kusama-mainpage-column"><h2 class="homepage-font-footer">Join a cyber secret society</h2><p class="homepage-font-footer">The Kappa Sigma Mu fraternity asks you to get a Kusama tattoo to join.</p><a href="/docs/maintain-guides-society-kusama"><button class="kusama-mainpage-build-footer">See Kappa Sigma Mu</button></a></div></div></section><section class="row"><div class="copyright homepage-font">¬© 2023 Web3 Foundation</div>¬∑<a target="_blank" rel="noreferrer noopener" class="item homepage-font" href="https://polkadot.network/legal-disclosures/">Legal Disclosures</a>¬∑<a target="_blank" rel="noreferrer noopener" class="item homepage-font" href="https://polkadot.network/privacy/">Privacy Policy</a></section></footer></div>
<script src="/assets/js/runtime~main.161af186.js"></script>
<script src="/assets/js/main.d3bff339.js"></script>
</body>
</html>