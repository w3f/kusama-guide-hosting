"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1724],{10666:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>r,toc:()=>h});var n=t(74848),a=t(28453);const o={id:"learn-asset-conversion-assethub",title:"Asset Conversion on AssetHub",sidebar_label:"Asset Conversion",description:"Asset Conversion implementation details on AssetHub.",keywords:["Assets","DEX","Exchange","Pools","Tokens"],slug:"../learn-asset-conversion-assethub"},i=void 0,r={id:"learn/learn-asset-conversion-assethub",title:"Asset Conversion on AssetHub",description:"Asset Conversion implementation details on AssetHub.",source:"@site/../docs/learn/learn-asset-conversion-assethub.md",sourceDirName:"learn",slug:"/learn-asset-conversion-assethub",permalink:"/docs/learn-asset-conversion-assethub",draft:!1,unlisted:!1,tags:[],version:"current",lastUpdatedBy:"Filippo",lastUpdatedAt:1726760224e3,frontMatter:{id:"learn-asset-conversion-assethub",title:"Asset Conversion on AssetHub",sidebar_label:"Asset Conversion",description:"Asset Conversion implementation details on AssetHub.",keywords:["Assets","DEX","Exchange","Pools","Tokens"],slug:"../learn-asset-conversion-assethub"}},l={},h=[{value:"Fee Payment in Any Asset - Wallets",id:"fee-payment-in-any-asset---wallets",level:2},{value:"Fee Payment in Any Asset - Parachains",id:"fee-payment-in-any-asset---parachains",level:2},{value:"Creation of Pools with Foreign Assets - Parachains",id:"creation-of-pools-with-foreign-assets---parachains",level:2}];function c(e){const s={a:"a",admonition:"admonition",h2:"h2",li:"li",p:"p",ul:"ul",...(0,a.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(s.p,{children:["Asset conversion is a simple AMM (Automated Market Maker) based on\n",(0,n.jsx)(s.a,{href:"https://github.com/Uniswap/v2-core",children:"Uniswap V2"})," logic, deployed as a\n",(0,n.jsx)(s.a,{href:"https://github.com/paritytech/polkadot-sdk/tree/master/substrate/frame/asset-conversion",children:"pallet on Polkadot AssetHub"}),".\nIn the AMM model the prices of tokens are determined by a mathematical formula based on the ratio of\ntokens in a liquidity pool, unlike traditional exchanges that use an order book. This will be a\n\u201ctrustless\u201d DEX, controlled through Polkadot OpenGov."]}),"\n",(0,n.jsx)(s.admonition,{type:"note",children:(0,n.jsx)(s.p,{children:"The asset pairs of the liquidity pools of AssetHub will always contain the relay chain's native\ntoken as one of the assets. Provision of liquidity for pools with arbitrary asset pairs is not\nallowed."})}),"\n",(0,n.jsx)(s.p,{children:"Asset Conversion on Asset Hub enables fee payment in any asset, given it has a liquidity pool, such\nthat the fee handler (in this case, a Collator) only receives the native asset."}),"\n",(0,n.jsx)(s.p,{children:"Asset Conversion pallet allows you to:"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.a,{href:"https://docs.rs/pallet-asset-conversion/latest/pallet_asset_conversion/pallet/struct.Pallet.html#method.create_pool",children:"Create a liquidity pool"}),"\nwith the relay chain's native token and an asset"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.a,{href:"https://docs.rs/pallet-asset-conversion/latest/pallet_asset_conversion/pallet/struct.Pallet.html#method.add_liquidity",children:"Provide the liquidity"}),"\nand receive back an LP token"]}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.a,{href:"https://docs.rs/pallet-asset-conversion/latest/pallet_asset_conversion/pallet/struct.Pallet.html#method.remove_liquidity",children:"Exchange the LP token back to assets"})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.a,{href:"https://docs.rs/pallet-asset-conversion/latest/pallet_asset_conversion/pallet/struct.Pallet.html#method.swap_exact_tokens_for_tokens",children:"Swap assets if there is a pool created"})}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.a,{href:"https://docs.rs/pallet-asset-conversion/latest/pallet_asset_conversion/trait.AssetConversionApi.html#method.quote_price_exact_tokens_for_tokens",children:"Query for an exchange price"}),"\nvia a runtime call endpoint"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.a,{href:"https://docs.rs/pallet-asset-conversion/latest/pallet_asset_conversion/trait.AssetConversionApi.html#method.get_reserves",children:"Query the size of a liquidity pool"}),"."]}),"\n"]}),"\n",(0,n.jsx)(s.admonition,{title:"Asset Conversion Tutorials",type:"info",children:(0,n.jsxs)(s.p,{children:["The Asset Conversion user guide and tutorials are available\n",(0,n.jsx)(s.a,{href:"/docs/learn-guides-asset-conversion",children:"here"})]})}),"\n",(0,n.jsx)(s.h2,{id:"fee-payment-in-any-asset---wallets",children:"Fee Payment in Any Asset - Wallets"}),"\n",(0,n.jsxs)(s.p,{children:["Without Asset Conversion pallet, only DOT and\n",(0,n.jsx)(s.a,{href:"/docs/learn-assets#sufficient-assets",children:"sufficient assets"})," can be used for paying transaction fees.\nWith the Asset Conversion pallet deployed, Wallets can enable users to pay transaction fees through\nany arbitrary asset made available in pools with either DOT or sufficient assets. More specifically,\nthis functionality is enabled through\n",(0,n.jsx)(s.a,{href:"https://github.com/paritytech/polkadot-sdk/tree/cdc8d197e6d487ef54f7e16767b5c1ab041c8b10/substrate/frame/transaction-payment/asset-conversion-tx-payment",children:"Asset Conversion Transaction Payment Pallet"}),",\nallowing runtimes that include it to pay for transactions in assets other than the native token of\nthe chain."]}),"\n",(0,n.jsx)(s.admonition,{title:"Handling Pools with Low Liquidity",type:"caution",children:(0,n.jsx)(s.p,{children:"The wallets and UIs should ensure that the user is prompted with the necessary warnings, such that\nthey do not accidentally spend all of their funds to perform a swap on a pool with no or low\nliquidity."})}),"\n",(0,n.jsx)(s.h2,{id:"fee-payment-in-any-asset---parachains",children:"Fee Payment in Any Asset - Parachains"}),"\n",(0,n.jsx)(s.p,{children:"Parachains can pay for their XCM execution fees in any asset with a liquidity pool on AssetHub."}),"\n",(0,n.jsx)(s.h2,{id:"creation-of-pools-with-foreign-assets---parachains",children:"Creation of Pools with Foreign Assets - Parachains"}),"\n",(0,n.jsx)(s.p,{children:"Assets pallet uses XCM MultiLocations to represent assets, and their corresponding origins to\ncontrol them."}),"\n",(0,n.jsx)(s.p,{children:"One of the pain points of integrating parachain tokens natively on wallets and exchanges is that\nthey require running individual parachain infrastructure like full nodes to process deposits, and\nrequire additional code to handle withdrawals because they need to be able to construct and\nbroadcast transactions on each parachain. These parachains could use different balances pallets or\norder them differently. When Polkadot hosts hundreds of parachains (and possibly thousands of\nthreads), this becomes a huge burden in terms of network support. This is in contrast to adding\nsupport for an additional ERC20 token; the marginal effort is very small since an Ethereum node\nalready serves all the data they need."}),"\n",(0,n.jsx)(s.p,{children:"With support for these assets on Asset Hub, exchanges/custodians could monitor one chain for\ndeposits (applications and UIs would need to give the option to transfer to Asset Hub). For\nwithdrawals, users could choose to withdraw to their address on Asset Hub. There are two user\nexperience bonuses here:"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"The exchange/custodian only needs to transact on one parachain and can access every other without\nany infrastructure lift."}),"\n",(0,n.jsx)(s.li,{children:"For the user, they never actually need to \u201csee\u201d AssetHub. It\u2019s entirely abstracted away behind\neither the parachain wallet/application or the exchange/custodian."}),"\n"]})]})}function d(e={}){const{wrapper:s}={...(0,a.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},28453:(e,s,t)=>{t.d(s,{R:()=>i,x:()=>r});var n=t(96540);const a={},o=n.createContext(a);function i(e){const s=n.useContext(o);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function r(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),n.createElement(o.Provider,{value:s},e.children)}}}]);